// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.5/esri/copyright.txt for details.
//>>built
define("require exports ./enums ./Utils ./visualVariablesUtils ./MeshUtils ./MaterialInfoUtils ./enums ./WGLDisplayObject ./WGLDisplayRecord".split(" "),function(D,q,h,l,t,x,y,g,z,A){function u(e,g){if(!e)return h.WGLVVFlag.NONE;var k=0;e.forEach(function(a){var e=a.type;"size"===e&&"outline"!==a.target?k|=t.getTypeOfSizeVisualVariable(a):"color"===e?k|=h.WGLVVFlag.COLOR:"opacity"===e?k|=h.WGLVVFlag.OPACITY:g&&"rotation"===e&&(k|=h.WGLVVFlag.ROTATION)});return k}Object.defineProperty(q,"__esModule",
{value:!0});var e=[];q.getDisplayObject=function(v,n,k,a,q,B,C,r,m){n=v.attributes[n];r=z.pool.acquire(n);e.length=0;var b=k.renderer,f=k.getSymbol(v);if(f){var c=l.isMarkerSymbol(f);if("esriGeometryPoint"===a||"esriGeometryLine"===a)e.push({symbol:f,vv:u(b.visualVariables,c)});else if(c){if(b.backgroundFillSymbol&&(a=b.backgroundFillSymbol,e.push({symbol:a,vv:h.WGLVVFlag.NONE}),a.outline&&"none"!==a.outline.style)){c=h.WGLVVFlag.NONE;if(b.visualVariables)for(var d=0,p=b.visualVariables;d<p.length;d++){var w=
p[d];if("size"===w.type&&"outline"===w.target){c|=t.getTypeOfSizeVisualVariable(w);break}}e.push({symbol:a.outline,vv:c})}e.push({symbol:f,vv:u(b.visualVariables,!0)})}else if(l.isFillSymbol(f)){c=h.WGLVVFlag.NONE;if(b.visualVariables)for(d=0,p=b.visualVariables;d<p.length;d++)a=p[d],a=a.type,"color"===a?c|=h.WGLVVFlag.COLOR:"opacity"===a&&(c|=h.WGLVVFlag.OPACITY);e.push({symbol:f,vv:c});if(f.outline&&"none"!==f.outline.style){c=h.WGLVVFlag.NONE;if(b.visualVariables)for(d=0,b=b.visualVariables;d<
b.length;d++)if(a=b[d],"size"===a.type&&"outline"===a.target){c|=t.getTypeOfSizeVisualVariable(a);break}e.push({symbol:f.outline,vv:c})}}else l.isLineSymbol(f)&&e.push({symbol:f,vv:u(b.visualVariables,c)})}for(f=0;f<e.length;f++){c=e[f];a=c.symbol;b=l.getSymbolGeometryType(a);d=0!==c.vv;switch(b){case g.WGLGeometryType.MARKER:m.icon||(m.icon=l.getStrides(g.WGLGeometryType.MARKER,d,!1));break;case g.WGLGeometryType.LINE:m.line||(m.line=l.getStrides(g.WGLGeometryType.LINE,d));break;case g.WGLGeometryType.FILL:m.fill||
(m.fill=l.getStrides(g.WGLGeometryType.FILL,d));break;case g.WGLGeometryType.TEXT:m.text||(m.text=l.getStrides(g.WGLGeometryType.TEXT,d))}if(b===g.WGLGeometryType.TEXT)for(b=0,a=[];b<a.length;b++)r.displayRecords.push(a[b]);else d=C.get(a),c=y.createMaterialInfo(k,d,b,c.vv),a=x.createMesh(n,k,c.materialKeyInfo,d,b,q,B,v,a),b=A.pool.acquire(n,b,a,c,0,0),r.displayRecords.push(b)}return r}});