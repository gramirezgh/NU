// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.5/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/extendsHelper ../../../geometry/SpatialReference ../../../geometry/Point ../../../geometry/support/scaleUtils ../lib/glMatrix ./earthUtils ./mathUtils ./projectionUtils ../webgl-engine/lib/BufferVectorMath ../webgl-engine/lib/Util".split(" "),function(l,z,r,w,t,x,f,n,y,h,p,u){l=function(){function g(c){this.spatialReference=c}g.prototype.toRenderCoords=function(c,e,a){return c instanceof t?h.pointToVector(c,e,this.spatialReference):h.vectorToVector(c,
e,a,this.spatialReference)};g.prototype.fromRenderCoords=function(c,e,a){return e instanceof t||e instanceof w?h.vectorToPoint(c,this.spatialReference,e,a):h.vectorToVector(c,this.spatialReference,e,a)};g.prototype.viewAngle=function(c,e){this.worldUpAtPosition(c,q);f.vec3d.subtract(e,c,m);c=f.vec3d.length(m);return 0===c?0:y.acos(f.vec3d.dot(m,q)/c)};return g}();(function(g){var c=function(c){function a(d){d=c.call(this,d||h.SphericalRenderSpatialReference)||this;d.unitInMeters=1;return d}r(a,c);
a.prototype.getAltitude=function(d,b){void 0===b&&(b=0);return a.getAltitude(d,b)};a.prototype.setAltitude=function(d,b,k){void 0===k&&(k=0);a.setAltitude(d,b,k)};a.prototype.setAltitudeOfTransformation=function(d,b){a.setAltitudeOfTransformation(d,b)};a.prototype.worldUpAtPosition=function(d,b){return a.worldUpAtPosition(d,b)};a.prototype.intersectManifold=function(d,b,k,c){return a.intersectManifold(d,b,k,c)};a.getAltitude=function(d,b){void 0===b&&(b=0);return p.Vec3Compact.length(d,b)-n.earthRadius};
a.setAltitude=function(d,b,a){void 0===a&&(a=0);a=a||0;d=(d+n.earthRadius)/p.Vec3Compact.length(b,a);p.Vec3Compact.scale(b,a,d)};a.setAltitudeOfTransformation=function(d,b){a.setAltitude(d,b,12)};a.worldUpAtPosition=function(a,b){return f.vec3d.normalize(a||[0,0,0],b||q)};a.intersectManifold=function(a,b,c,e){void 0===e&&(e=f.vec3d.create());return u.raySphere(a,b,null,n.earthRadius+c,e)};return a}(g);g.Spherical=c;c=function(c){function a(a){var b=c.call(this,a)||this;b.unitInMeters=x.getMetersPerUnitForSR(a);
return b}r(a,c);a.prototype.getAltitude=function(d,b){void 0===b&&(b=0);return a.getAltitude(d,b)};a.prototype.setAltitude=function(d,b,c){void 0===c&&(c=0);a.setAltitude(d,b,c)};a.prototype.setAltitudeOfTransformation=function(d,b){a.setAltitudeOfTransformation(d,b)};a.prototype.worldUpAtPosition=function(d,b){return a.worldUpAtPosition(d,b)};a.prototype.intersectManifold=function(d,b,c,f){return a.intersectManifold(d,b,c,f)};a.getAltitude=function(a,b){return b?a[b+2]:a[2]};a.setAltitude=function(a,
b,c){c?b[c+2]=a:b[2]=a};a.setAltitudeOfTransformation=function(d,b){a.setAltitude(d,b,12)};a.worldUpAtPosition=function(d,b){return b?f.vec3d.set(a.worldUp,b):a.worldUp};a.intersectManifold=function(d,b,c,e){void 0===e&&(e=f.vec3d.create());f.vec4d.set4(a.worldUp[0],a.worldUp[1],a.worldUp[2],-c,v);return!u.rayPlane(d,b,v,e)||0>f.vec3d.dot(f.vec3d.subtract(e,d,m),b)?!1:!0};a.worldUp=[0,0,1];return a}(g);g.Planar=c})(l||(l={}));var q=f.vec3d.create(),v=f.vec4d.create(),m=f.vec3d.create();return l});