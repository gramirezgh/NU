// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.5/esri/copyright.txt for details.
//>>built
define("require exports ./IdGen ./Util ./BoundingInfo ./ComponentUtils".split(" "),function(x,y,t,h,u,v){return function(){function a(e,c,b){this.singleUse=!1;this.componentAABB=null;this.id=a.__idGen.gen(c);this.data=e;this.boundingInfos=b||[];h.assert(1<=e.faces.length)}a.prototype.getId=function(){return this.id};a.prototype.getData=function(){return this.data};Object.defineProperty(a.prototype,"numGroups",{get:function(){return this.data.faces.length},enumerable:!0,configurable:!0});a.prototype.getNumGroups=
function(){return this.numGroups};a.prototype.getComponentCount=function(){return v.componentCount(this.data.componentOffsets)};a.prototype.getComponentAABB=function(e,c){null==this.componentAABB&&(this.componentAABB=this._computeComponentAABB());for(var b=0;6>b;b++)c[b]=this.componentAABB[6*e+b];return c};a.prototype._computeComponentAABB=function(){for(var e=this.getComponentCount(),c=new Float32Array(6*e),b=0;b<e;b++)this._calculateAABB(0,b,c,6*b);return c};a.prototype._calculateAABB=function(e,
c,b,a){void 0===a&&(a=0);var d=this.data.faces[e];e=d.indices[d.positionKey];var d=this.data.vertexAttributes[d.positionKey].data,f=this.data.componentOffsets,w=f.length?f[c+1]:e.length,k=Infinity,l=Infinity,m=Infinity,n=-Infinity,p=-Infinity,q=-Infinity;for(c=f.length?f[c]:0;c<w;c++)var g=3*e[c],f=d[g],h=d[g+1],g=d[g+2],k=Math.min(k,f),l=Math.min(l,h),m=Math.min(m,g),n=Math.max(n,f),p=Math.max(p,h),q=Math.max(q,g);b?(b[a]=k,b[a+1]=l,b[a+2]=m,b[a+3]=n,b[a+4]=p,b[a+5]=q):b=[k,l,m,n,p,q];return b};
a.prototype.calculateBoundingInfo=function(a,c){a=this.data.faces[a];var b="triangle"===a.type?3:1,e=a.indices[a.positionKey];if(0===e.length)for(var e=new Uint32Array(b),d=0;d<b;++d)e[d]=d;d=e.length;h.assert(0===d%b);for(var f=d/b,r=new Uint32Array(f),d=0;d<f;++d)r[d]=d;return new u(r,b,e,this.data.vertexAttributes[a.positionKey],c)};a.prototype.getBoundingInfo=function(a){var c=this.boundingInfos[a];null==c&&(c=this.calculateBoundingInfo(a),this.boundingInfos[a]=c);return c};a.prototype.invalidateBoundingInfo=
function(){this.boundingInfos=[]};a.__idGen=new t;return a}()});