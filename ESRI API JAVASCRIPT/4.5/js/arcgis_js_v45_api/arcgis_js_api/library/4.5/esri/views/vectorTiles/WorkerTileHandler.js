// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.5/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/vectorTiles/WorkerTile":function(){define("require exports dojo/Deferred ../../core/promiseUtils ../../core/executeAsync ../../core/ObjectPool ./VertexMemoryBuffer ./IndexMemoryBuffer ./TileParser ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./Placement ./GeometryUtils".split(" "),function(w,a,b,q,m,l,h,d,c,k,g,n,v,y,D){return function(){function a(){this.status=this.rotation=0;this._symbolBuckets=[];this.placementEngine=new y.PlacementEngine;this.polygonVertexBuffer=
new h.PolygonMemoryBuffer;this.polygonOutlineVertexBuffer=new h.PolygonOutlineMemoryBuffer;this.polygonIndexBuffer=new d.TriangleElementMemoryBuffer;this.polygonOutlineIndexBuffer=new d.TriangleElementMemoryBuffer;this.lineVertexBuffer=new h.LineMemoryBuffer;this.lineIndexBuffer=new d.TriangleElementMemoryBuffer;this.markerVertexBuffer=new h.SymbolMemoryBuffer;this.markerIndexBuffer=new d.TriangleElementMemoryBuffer;this.textVertexBuffer=new h.SymbolMemoryBuffer;this.textIndexBuffer=new d.TriangleElementMemoryBuffer}
a.prototype.initialize=function(a,d,g,c){void 0===c&&(c=0);this.tileKey=a;this.refKey=d;this._workerTileHandler=g;this.rotation=c;this.placementEngine.setAngle(D.C_DEG_TO_RAD*c)};a.prototype.release=function(){this.tileKey=this.refKey="";this.rotation=this.status=0;this.polygonVertexBuffer.reset();this.polygonOutlineVertexBuffer.reset();this.polygonIndexBuffer.reset();this.polygonOutlineIndexBuffer.reset();this.lineVertexBuffer.reset();this.lineIndexBuffer.reset();this.markerVertexBuffer.reset();
this.markerIndexBuffer.reset();this.textVertexBuffer.reset();this.textIndexBuffer.reset();this.placementEngine.reset();this._symbolBuckets.length=0;this._workerTileHandler=null};a.prototype.setDataAndParse=function(a,d){var c=this,h=new b(function(a){c.status=6});this._parse(a,d).then(function(a){c.status=4;for(var d=new Uint32Array([2,c.polygonVertexBuffer.sizeInBytes,3,c.polygonOutlineVertexBuffer.sizeInBytes,6,c.polygonIndexBuffer.sizeInBytes,7,c.polygonOutlineIndexBuffer.sizeInBytes,0,c.lineVertexBuffer.sizeInBytes,
8,c.lineIndexBuffer.sizeInBytes,4,c.markerVertexBuffer.sizeInBytes,9,c.markerIndexBuffer.sizeInBytes,5,c.textVertexBuffer.sizeInBytes,10,c.textIndexBuffer.sizeInBytes]),b=[],m=a.length,y=0;y<m;y++){var p=a[y];if(p instanceof g)b.push(p.layerIndex),b.push(1),b.push(p.polygonIndexStart),b.push(p.polygonIndexCount),b.push(p.polygonOutlineIndexStart),b.push(p.polygonOutlineIndexCount);else if(p instanceof n)b.push(p.layerIndex),b.push(2),b.push(p.triangleIndexStart),b.push(p.triangleIndexCount),b.push(p.connectorStart),
b.push(p.connectorCount);else if(p instanceof v){b.push(p.layerIndex);b.push(3);b.push(p.sdfMarker?1:0);var D=p.markerPageMap;b.push(D.size);D.forEach(function(a,d){b.push(d);b.push(a[0]);b.push(a[1])});p=p.glyphsPageMap;b.push(p.size);p.forEach(function(a,d){b.push(d);b.push(a[0]);b.push(a[1])})}else p instanceof k&&(b.push(p.layerIndex),b.push(0))}a=new Uint32Array(b);var m=c.polygonVertexBuffer.toBuffer(),y=c.polygonOutlineVertexBuffer.toBuffer(),p=c.polygonIndexBuffer.toBuffer(),D=c.polygonOutlineIndexBuffer.toBuffer(),
l=c.lineVertexBuffer.toBuffer(),q=c.lineIndexBuffer.toBuffer(),H=c.markerVertexBuffer.toBuffer(),A=c.markerIndexBuffer.toBuffer(),B=c.textVertexBuffer.toBuffer(),t=c.textIndexBuffer.toBuffer();h.resolve({data:{bufferDataInfo:d.buffer,bucketDataInfo:a.buffer,bufferData:[m,y,p,D,l,q,H,A,B,t]},buffers:[m,p,y,D,l,q,H,A,B,t,d.buffer,a.buffer]})});return h.promise};a.prototype.addBucket=function(a){this._symbolBuckets.push(a)};a.prototype.updateSymbols=function(a){var d=this,g=this._symbolBuckets;if(!g||
0===g.length)return q.resolve({data:null,buffers:null});this.rotation=a;var c=this.placementEngine;c.reset();c.setAngle(a/256*360*D.C_DEG_TO_RAD);var b=this.markerVertexBuffer;b.reset();var h=this.markerIndexBuffer;h.reset();var n=this.textVertexBuffer;n.reset();var k=this.textIndexBuffer;k.reset();var p=[],y=g.length,l=0;return m(function(){if(6===d.status||0===d.status)return!0;if(l<y){var a=g[l++].copy(b,h,n,k,c);a&&(p.push(a),a.updateSymbols())}return l>=y},5).then(function(){if(6===d.status||
0===d.status||0===b.sizeInBytes&&0===h.sizeInBytes&&0===n.sizeInBytes&&0===k.sizeInBytes)return{data:null,buffers:null};var a=new Uint32Array([4,b.sizeInBytes,9,h.sizeInBytes,5,n.sizeInBytes,10,k.sizeInBytes]),g=[];y=p.length;for(var c=0;c<y;c++){var u=p[c];g.push(u.layerIndex);g.push(3);g.push(u.sdfMarker?1:0);var m=u.markerPageMap;g.push(m.size);m.forEach(function(a,d){g.push(d);g.push(a[0]);g.push(a[1])});u=u.glyphsPageMap;g.push(u.size);u.forEach(function(a,d){g.push(d);g.push(a[0]);g.push(a[1])})}var c=
new Uint32Array(g),u=b.toBuffer(),m=h.toBuffer(),t=n.toBuffer(),l=k.toBuffer();return{data:{bufferDataInfo:a.buffer,bucketDataInfo:c.buffer,bufferData:[u,m,t,l]},buffers:[u,m,t,l,a.buffer,c.buffer]}}).otherwise(function(a){return q.resolve({data:null,buffers:null})})};a.prototype.setObsolete=function(){this.status=6};a.prototype.getLayers=function(){return this._workerTileHandler.getLayers()};a.prototype.getWorkerTileHandler=function(){return this._workerTileHandler};a.prototype._parse=function(a,
d){if(!a||0===a.byteLength)return q.resolve([]);this.status=2;return(new c(a,this,d)).parse()};a.pool=new l(a);return a}()})},"esri/core/executeAsync":function(){define(["require","exports","dojo/Deferred","./now"],function(w,a,b,q){return function(a,l){var h;if(!l||0>=l)l=500;var d=new b(function(){h&&clearTimeout(h)}),c=function(){if(!d.isFulfilled()){for(var b=q(),g=!1;!g&&q()-b<l;)g=!0===a();g?d.resolve():h=setTimeout(c,0)}};h=setTimeout(c,0);return d.promise}})},"esri/views/vectorTiles/VertexMemoryBuffer":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./MemoryBuffer ./GeometryUtils".split(" "),
function(w,a,b,q,m,l){Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function d(){return a.call(this,12)||this}b(d,a);d.prototype.add=function(a,d,g,b,h,y,l){var c=this.array,n=this.index;a=m.i1616to32(a,d);c.push(a);a=m.i8888to32(Math.round(31*g),Math.round(31*b),Math.round(31*h),Math.round(31*y));c.push(a);a=m.i1616to32(l,0);c.push(a);return n};return d}(m);a.LineMemoryBuffer=w;w=function(a){function d(){return a.call(this,4)||this}b(d,a);d.prototype.add=function(a,d){var g=this.index;
this.array.push(m.i1616to32(a,d));return g};return d}(m);a.LineJoinMemoryBuffer=w;w=function(a){function d(){return a.call(this,4)||this}b(d,a);d.prototype.add=function(a,d){this.array.push(m.i1616to32(a,d))};return d}(m);a.PolygonMemoryBuffer=w;w=function(a){function d(){return a.call(this,8)||this}b(d,a);d.prototype.add=function(a,d,g,b,h,y){var c=this.array,n=this.index;a=m.i1616to32(a,d);c.push(a);a=m.i8888to32(Math.round(15*g),Math.round(15*b),h,y);c.push(a);return n};return d}(m);a.PolygonOutlineMemoryBuffer=
w;w=function(a){function d(){return a.call(this,16)||this}b(d,a);d.prototype.add=function(a,d,g,b,h,y,D,p,q,x){var c=this.array,n=this.index;a=m.i1616to32(a,d);c.push(a);a=m.i1616to32(Math.round(32*g),Math.round(32*b));c.push(a);a=m.i8888to32(h/4,y/4,0,0);c.push(a);a=m.i8888to32(Math.ceil(10*x),l.radToByte(D),10*p,10*Math.min(q,25));c.push(a);return n};return d}(m);a.SymbolMemoryBuffer=w})},"esri/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(w,a){return function(){function a(a){this._array=
[];0>=a&&console.error("strideInBytes must be positive!");this._stride=a}Object.defineProperty(a.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*
this._array.length},enumerable:!0,configurable:!0});a.prototype.reset=function(){this.array.length=0};a.prototype.toBuffer=function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(a,b){return 65535&a|b<<16};a.i8888to32=function(a,b,l,h){return a&255|(b&255)<<8|(l&255)<<16|h<<24};a.i8816to32=function(a,b,l){return a&255|(b&255)<<8|l<<16};return a}()})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(w,a){function b(a,b){a%=b;return 0<=a?a:
a+b}Object.defineProperty(a,"__esModule",{value:!0});a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var q=1/Math.LN2;a.positiveMod=b;a.radToByte=function(m){return b(m*a.C_RAD_TO_256,256)};a.degToByte=function(m){return b(m*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*q};a.sqr=function(a){return a*
a};a.clamp=function(a,b,h){return Math.min(Math.max(a,b),h)};a.interpolate=function(a,b,h){return a*(1-h)+b*h};a.between=function(a,b,h){return a>=b&&a<=h||a>=h&&a<=b}})},"esri/views/vectorTiles/IndexMemoryBuffer":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./MemoryBuffer"],function(w,a,b,q,m){Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function h(){return a.call(this,12)||this}b(h,a);h.prototype.add=function(a,
c,b){var d=this.array;d.push(a);d.push(c);d.push(b)};return h}(m);a.TriangleElementMemoryBuffer=w;m=function(a){function h(){return a.call(this,4)||this}b(h,a);h.prototype.add=function(a){this.array.push(a)};return h}(m);a.PointElementMemoryBuffer=m})},"esri/views/vectorTiles/TileParser":function(){define("require exports dojo/promise/all ../../core/promiseUtils ../../core/executeAsync ../../core/pbf ./SourceLayerData ./Feature ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ../2d/engine/webgl/TileClipper".split(" "),
function(w,a,b,q,m,l,h,d,c,k,g,n,v){return function(){function a(a,d,g){this._pbfTile=new l(new Uint8Array(a),new DataView(a));this._tile=d;this._connection=g;this._layers=d.getLayers();g=d.tileKey.split("/").map(parseFloat);var c=g[0];a=g[1];g=g[2];this._level=c;d.refKey&&(d=d.refKey.split("/").map(parseFloat)[0],d=c-d,0<d&&(c=(1<<d)-1,this._tileClipper=new v.TileClipper(d,a&c,g&c)));this._tileClipper||(this._tileClipper=new v.SimpleBuilder)}a.prototype.parse=function(){for(var a=this,g=this._parseTileData(this._pbfTile),
c=this._layers,h=c.length,n=this._level,k,y=[],u={},l=new Set,h=h-1;0<=h;h--)if(k=c[h],!(k.minzoom&&n<k.minzoom||k.maxzoom&&n>=k.maxzoom||k.layout&&"none"===k.layout.visibility))if(0===k.type)k=this._createBucket(k),k.layerIndex=h,y.push(k);else{var v=k.sourceLayer,P=g[v];P&&(l.add(v),k=this._createBucket(k))&&(k.layerIndex=h,k.layerExtent=P.extent,(P=u[v])||(P=u[v]=[]),P.push(k))}var N=10*(this._level+1),E=[],U=[],S=[],Q=[],w=this._tileClipper,B=new Set,t={},K=[];l.forEach(function(a){return K.push(a)});
var I=0,O=0,M=K.length;return m(function(){if(6===a._tile.status)return!0;switch(I){case 0:if(O<M){var c=K[O++],b=g[c],h=u[c];if(h&&0!==h.length)for(c=b.getData();c.next(2);){var n=new d(c.getMessage(),b),k=n.values;if(k&&(k=k._minzoom)&&k>=N)continue;for(var m=0,y=h;m<y.length;m++)k=y[m],k.pushFeature(n)}}else{b=a._tile;for(c in u)for(h=u[c],n=0;n<h.length;n++)k=h[n],k.hasFeatures()&&(3===k.layer.type?(E.push(k),b.addBucket(k)):k.layer.refLayerId?S.push(k):(U.push(k),Q[k.layer.id]=k));I=1;O=0;M=
E.length}break;case 1:O<M?E[O++].getResources(w,B,t):I=2}return 2===I},50).then(function(){if(6===a._tile.status)return[];var d=[],g=a._tile.getWorkerTileHandler(),c;0<B.size&&(c=g.fetchSprites(B,a._connection),d.push(c));for(var h in t)c=t[h],0<c.size&&(c=g.fetchGlyphs(a._tile.tileKey,h,c,a._connection),d.push(c));return b(d).then(function(d){if(6===a._tile.status)return[];var g=0,c=0,b=U.length;return m(function(){if(6===a._tile.status)return!0;switch(g){case 0:if(c<b){var d=U[c++];d.processFeatures(w,
a._tile);y.push(d)}else g=1,c=0,b=S.length;break;case 1:for(var h=0;h<S.length;h++){var d=S[h],t=Q[d.layer.refLayerId];t&&(t.assignBufferInfo(d),y.push(d))}g=2;c=0;b=E.length;break;case 2:c<b?(d=E[c++],d.processFeatures(w,a._tile),y.push(d)):g=3}return 3===g},50).then(function(){y.sort(function(a,d){return a.layerIndex-d.layerIndex});return y})}).otherwise(function(a){return q.reject(Error(a))})}).otherwise(function(a){return q.reject(Error(a))})};a.prototype._parseTileData=function(a){for(var d=
{};a.next();)switch(a.tag()){case 3:var g=new h(a.getMessage());d[g.name]=g;break;default:a.skip()}return d};a.prototype._createBucket=function(a){switch(a.type){case 0:return this._createBackgroundBucket(a);case 1:return this._createFillBucket(a);case 2:return this._createLineBucket(a);case 3:return this._createSymbolBucket(a)}};a.prototype._createBackgroundBucket=function(a){return new c(a,this._level)};a.prototype._createFillBucket=function(a){var d=this._tile;return new k(a,this._level,d.polygonVertexBuffer,
d.polygonIndexBuffer,d.polygonOutlineVertexBuffer,d.polygonOutlineIndexBuffer)};a.prototype._createLineBucket=function(a){var d=this._tile;return new g(a,this._level,d.lineVertexBuffer,d.lineIndexBuffer)};a.prototype._createSymbolBucket=function(a){var d=this._tile;return new n(a,this._level,d.markerVertexBuffer,d.markerIndexBuffer,d.textVertexBuffer,d.textIndexBuffer,d.placementEngine,d.getWorkerTileHandler())};return a}()})},"esri/core/pbf":function(){define(["require","exports"],function(w,a){return function(){function a(a,
b,l,h){this._tag=0;this._dataType=99;this._data=a;this._dataView=b;this._pos=l||0;this._end=h||a.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var b=this._decodeVarint();this._tag=b>>3;this._dataType=b&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=
function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){return this._decodeVarint()};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){return this._decodeSVarint()};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var a=0!==this._data[this._pos];this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=
function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getUint32(b+4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getInt32(b+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=
this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),b=this._pos,b=this._toString(this._data,b,b+a);this._skip(a);return b};a.prototype.getBytes=function(){var a=this._getLength(),b=this._pos,b=this._toBytes(this._data,b,b+a);this._skip(a);return b};a.prototype.getMessage=function(){var b=this._getLength(),m=this._pos,m=new a(this._data,
this._dataView,m,m+b);this._skip(b);return m};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a};a.prototype._decodeVarint=function(){var a=this._data,b=this._pos,l=0,h;if(10<=this._end-b){if(h=a[b++],
l|=h&127,0!==(h&128)&&(h=a[b++],l|=(h&127)<<7,0!==(h&128)&&(h=a[b++],l|=(h&127)<<14,0!==(h&128)&&(h=a[b++],l|=(h&127)<<21,0!==(h&128)&&(h=a[b++],l+=268435456*(h&127),0!==(h&128)&&(h=a[b++],l+=34359738368*(h&127),0!==(h&128)&&(h=a[b++],l+=4398046511104*(h&127),0!==(h&128)&&(h=a[b++],l+=562949953421312*(h&127),0!==(h&128)&&(h=a[b++],l+=72057594037927936*(h&127),0!==(h&128)&&(h=a[b++],l+=0x7fffffffffffffff*(h&127),0!==(h&128)))))))))))throw Error("Varint too long!");}else{for(var d=1;b!==this._end;){h=
a[b];if(0===(h&128))break;++b;l+=(h&127)*d;d*=128}if(b===this._end)throw Error("Varint overrun!");++b;l+=h*d}this._pos=b;return l};a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,b,l){var h="",d="";for(l=Math.min(this._end,l);b<l;++b){var c=a[b];c&128?d+="%"+c.toString(16):(h+=decodeURIComponent(d)+
String.fromCharCode(c),d="")}d.length&&(h+=decodeURIComponent(d));return h};a.prototype._toBytes=function(a,b,l){l=Math.min(this._end,l);return new Uint8Array(a.buffer,b,l-b)};return a}()})},"esri/views/vectorTiles/SourceLayerData":function(){define(["require","exports"],function(w,a){return function(){function a(b){this.extent=4096;this.keys=[];this.values=[];for(this._pbfLayer=b.clone();b.next();)switch(b.tag()){case 1:this.name=b.getString();break;case 3:this.keys.push(b.getString());break;case 4:this.values.push(a._parseValue(b.getMessage()));
break;case 5:this.extent=b.getUInt32();break;default:b.skip()}}a.prototype.getData=function(){return this._pbfLayer};a._parseValue=function(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getInt64();case 5:return a.getUInt64();case 6:return a.getSInt64();case 7:return a.getBool();default:a.skip()}return null};return a}()})},"esri/views/vectorTiles/Feature":function(){define(["require","exports","../2d/engine/webgl/Geometry"],
function(w,a,b){return function(){function a(a,b){this.values={};var h=b.keys;for(b=b.values;a.next();)switch(a.tag()){case 1:this.id=a.getUInt64();break;case 2:for(var d=a.getMessage(),c=this.values;!d.empty();){var k=d.getUInt32(),g=d.getUInt32();c[h[k]]=b[g]}break;case 3:this.type=a.getUInt32();break;case 4:this._pbfGeometry=a.getMessage();break;default:a.skip()}}a.prototype.getGeometry=function(a){if(void 0!==this._geometry)return this._geometry;var l=this._pbfGeometry,h,d;a?a.reset(this.type):
h=[];for(var c=1,k=0,g=0,n=0;!l.empty();)switch(0===k&&(k=l.getUInt32(),c=k&7,k>>=3),k--,c){case 1:g+=l.getSInt32();n+=l.getSInt32();a?a.moveTo(g,n):(d&&h.push(d),d=[],d.push(new b.Point(g,n)));break;case 2:g+=l.getSInt32();n+=l.getSInt32();a?a.lineTo(g,n):d.push(new b.Point(g,n));break;case 7:a?a.close():d&&!d[0].equals(g,n)&&d.push(d[0].clone());break;default:throw Error("Invalid path operation");}a?a=a.result():(d&&h.push(d),a=h);return this._geometry=a};return a}()})},"esri/views/2d/engine/webgl/Geometry":function(){define(["require",
"exports"],function(w,a){Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(a,b){this.x=a;this.y=b}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.equals=function(a,b){return a===this.x&&b===this.y};a.prototype.isEqual=function(a){return a.x===this.x&&a.y===this.y};a.prototype.setCoords=function(a,b){this.x=a;this.y=b};a.prototype.normalize=function(){var a=this.x,b=this.y,a=Math.sqrt(a*a+b*b);this.x/=a;this.y/=a};a.prototype.rightPerpendicular=function(){var a=
this.x;this.x=this.y;this.y=-a};a.prototype.move=function(a,b){this.x+=a;this.y+=b};a.prototype.assign=function(a){this.x=a.x;this.y=a.y};a.prototype.assignAdd=function(a,b){this.x=a.x+b.x;this.y=a.y+b.y};a.prototype.assignSub=function(a,b){this.x=a.x-b.x;this.y=a.y-b.y};a.prototype.rotate=function(a,b){var l=this.x,h=this.y;this.x=l*a-h*b;this.y=l*b+h*a};a.prototype.scale=function(a){this.x*=a;this.y*=a};a.prototype.length=function(){var a=this.x,b=this.y;return Math.sqrt(a*a+b*b)};a.distance=function(a,
b){var l=b.x-a.x;a=b.y-a.y;return Math.sqrt(l*l+a*a)};a.add=function(b,m){return new a(b.x+m.x,b.y+m.y)};a.sub=function(b,m){return new a(b.x-m.x,b.y-m.y)};return a}();a.Point=w})},"esri/views/vectorTiles/BackgroundBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(w,a,b,q,m){return function(a){function h(d,c){return a.call(this,d,c)||this}b(h,a);return h}(m)})},"esri/views/vectorTiles/Bucket":function(){define(["require",
"exports"],function(w,a){return function(){function a(a,b){this.layerExtent=4096;this._features=[];this.layer=a;this.zoom=b;this._filter=a.getFeatureFilter()}a.prototype.pushFeature=function(a){this._filter.filter(a)&&this._features.push(a)};a.prototype.hasFeatures=function(){return 0<this._features.length};a.prototype.processFeatures=function(a,b){};a.prototype.assignBufferInfo=function(a){};return a}()})},"esri/views/vectorTiles/FillBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/ArrayPool ./Bucket ../2d/engine/webgl/Geometry ../../core/libs/earcut/earcut".split(" "),
function(w,a,b,q,m,l,h,d){return function(a){function c(d,c,b,h,k,p){d=a.call(this,d,c)||this;d.polygonVertexBuffer=b;d.polygonIndexBuffer=h;d.polygonOutlineVertexBuffer=k;d.polygonOutlineIndexBuffer=p;return d}b(c,a);Object.defineProperty(c.prototype,"polygonIndexStart",{get:function(){return this._triangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"polygonIndexCount",{get:function(){return this._triangleElementsNum},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"polygonOutlineIndexStart",{get:function(){return this._outlineElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"polygonOutlineIndexCount",{get:function(){return this._outlineElementsNum},enumerable:!0,configurable:!0});c.prototype.assignBufferInfo=function(a){a._triangleElementsStart=this._triangleElementsStart;a._triangleElementsNum=this._triangleElementsNum;a.layer.hasPaintProperty("fill-outline-color")?(a._outlineElementsStart=this._outlineElementsStart,a._outlineElementsNum=
this._outlineElementsNum):(a._outlineElementsStart=0,a._outlineElementsNum=0)};c.prototype.processFeatures=function(a,d){this._triangleElementsStart=this.polygonIndexBuffer.index;this._triangleElementsNum=0;this._outlineElementsStart=this.polygonOutlineIndexBuffer.index;this._outlineElementsNum=0;a&&a.setExtent(this.layerExtent);d=this.layer.getPaintValue("fill-pattern",this.zoom);d=this.layer.getPaintValue("fill-antialias",this.zoom)&&void 0===d;for(var c=0,g=this._features;c<g.length;c++){var b=
g[c].getGeometry(a);this._processFeature(b,d)}};c.prototype._processFeature=function(a,d){if(a){var g=a.length;if(d)for(d=0;d<g;d++)this._processOutline(a[d]);var b;for(d=0;d<g;d++){var h=c._area(a[d]);128<h?(void 0!==b&&this._processFill(a,b),b=[d]):-128>h&&void 0!==b&&b.push(d)}void 0!==b&&this._processFill(a,b)}};c.prototype._processOutline=function(a){var d=this.polygonOutlineVertexBuffer,c=this.polygonOutlineIndexBuffer,g=c.index,b,k,l,m=new h.Point(0,0),F=new h.Point(0,0),C=new h.Point(0,0),
A=-1,u=-1,z=b=-1,G=-1,P=a.length;if(!(2>P)){var N=a[0];for(b=a[P-1];P&&b.isEqual(N);)--P,b=a[P-1];if(!(2>P-0)){for(N=0;N<P;++N){0===N?(b=a[P-1],k=a[0],l=a[1],m.assignSub(k,b),m.normalize(),m.rightPerpendicular()):(b=k,k=l,l=N!==P-1?a[N+1]:a[0],m.assign(F));F.assignSub(l,k);F.normalize();F.rightPerpendicular();b=m.x*F.y-m.y*F.x;C.assignAdd(m,F);C.normalize();var E=-C.x*-m.x+-C.y*-m.y,E=Math.abs(0!==E?1/E:1);8<E&&(E=8);0<=b?(b=d.add(k.x,k.y,m.x,m.y,0,1),-1===z&&(z=b),0<=A&&0<=u&&0<=b&&c.add(A,u,b),
u=d.add(k.x,k.y,E*-C.x,E*-C.y,0,-1),-1===G&&(G=u),0<=A&&0<=u&&0<=b&&c.add(A,u,b),A=u,u=b,b=d.add(k.x,k.y,C.x,C.y,0,1),0<=A&&0<=u&&0<=b&&c.add(A,u,b),u=d.add(k.x,k.y,F.x,F.y,0,1)):(b=d.add(k.x,k.y,E*C.x,E*C.y,0,1),-1===z&&(z=b),0<=A&&0<=u&&0<=b&&c.add(A,u,b),u=d.add(k.x,k.y,-m.x,-m.y,0,-1),-1===G&&(G=u),0<=A&&0<=u&&0<=b&&c.add(A,u,b),A=u,u=b,b=d.add(k.x,k.y,-C.x,-C.y,0,-1),0<=A&&0<=u&&0<=b&&c.add(A,u,b),A=d.add(k.x,k.y,-F.x,-F.y,0,-1));0<=A&&0<=u&&0<=b&&c.add(A,u,b)}0<=A&&0<=u&&0<=z&&c.add(A,u,z);
0<=A&&0<=z&&0<=G&&c.add(A,G,z);this._outlineElementsNum+=3*(c.index-g)}}};c.prototype._processFill=function(a,c){var b;1<c.length&&(b=[]);for(var g=0,h=0;h<c.length;h++){var k=c[h];0!==g&&b.push(g);g+=a[k].length}for(var h=2*g,g=m.acquire(),n=0;n<c.length;n++)for(var k=c[n],k=a[k],l=k.length,F=0;F<l;++F)g.push(k[F].x),g.push(k[F].y);a=d(g,b,2);c=a.length;if(0<c){b=this.polygonVertexBuffer.index;for(n=0;n<h;)this.polygonVertexBuffer.add(g[n++],g[n++]);for(h=0;h<c;)this.polygonIndexBuffer.add(b+a[h++],
b+a[h++],b+a[h++]);this._triangleElementsNum+=c}m.release(g)};c._area=function(a){for(var d=0,c=a.length-1,b=0;b<c;b++)d+=(a[b].x-a[b+1].x)*(a[b].y+a[b+1].y);d+=(a[c].x-a[0].x)*(a[c].y+a[0].y);return.5*d};return c}(l)})},"esri/core/libs/earcut/earcut":function(){define([],function(){function w(d,g,k){k=k||2;C=d.length/k+(g?2*g.length:0);A=!1;var u=g&&g.length,n=u?g[0]*k:d.length,y=a(d,0,n,k,!0),p=[];if(!y)return p;var v,m,z,B;if(u)a:{var t=k,u=[],K,I,G;B=0;for(K=g.length;B<K;B++)I=g[B]*t,G=B<K-1?
g[B+1]*t:d.length,I=a(d,I,G,t,!1),I===I.next&&(I.steiner=!0),u.push(c(I));u.sort(l);for(B=0;B<u.length;B++){if(!y){y=null;break a}g=u[B];t=y;if(t=h(g,t))g=D(t,g),b(g,g.next);y=b(y,y.next)}}if(A)return p;if(d.length>80*k){v=z=d[0];m=u=d[1];for(t=k;t<n;t+=k)B=d[t],g=d[t+1],B<v&&(v=B),g<m&&(m=g),B>z&&(z=B),g>u&&(u=g);z=Math.max(z-v,u-m)}q(y,p,k,v,m,z);return p}function a(a,d,c,b,g){var h;if(g===0<F(a,d,c,b))for(g=d;g<c;g+=b)h=p(g,a[g],a[g+1],h);else for(g=c-b;g>=d;g-=b)h=p(g,a[g],a[g+1],h);h&&n(h,h.next)&&
(H(h),h=h.next);return h}function b(a,d){if(!a)return a;d||(d=a);var c,b=0,h=C*C/2;do{c=!1;if(a.steiner||!n(a,a.next)&&0!==g(a.prev,a,a.next))a=a.next;else{H(a);a=d=a.prev;if(a===a.next)return null;c=!0}if(b++>h)return A=!0,null}while(c||a!==d);return d}function q(a,c,h,l,p,F,x){if(a){if(!x&&F){var u=a,z=u;do null===z.z&&(z.z=d(z.x,z.y,l,p,F)),z.prevZ=z.prev,z=z.nextZ=z.next;while(z!==u);z.prevZ.nextZ=null;z.prevZ=null;var u=z,G,B,t,K,I,O,M=1;do{z=u;t=u=null;for(K=0;z;){K++;B=z;for(G=I=0;G<M&&(I++,
B=B.nextZ,B);G++);for(O=M;0<I||0<O&&B;)0===I?(G=B,B=B.nextZ,O--):0!==O&&B?z.z<=B.z?(G=z,z=z.nextZ,I--):(G=B,B=B.nextZ,O--):(G=z,z=z.nextZ,I--),t?t.nextZ=G:u=G,G.prevZ=t,t=G;z=B}t.nextZ=null;M*=2}while(1<K)}for(u=a;a.prev!==a.next;){z=a.prev;B=a.next;if(F)a:{t=a;O=l;var C=p,V=F;K=t.prev;I=t;M=t.next;if(0<=g(K,I,M))t=!1;else{var P=K.x>I.x?K.x>M.x?K.x:M.x:I.x>M.x?I.x:M.x,N=K.y>I.y?K.y>M.y?K.y:M.y:I.y>M.y?I.y:M.y;G=d(K.x<I.x?K.x<M.x?K.x:M.x:I.x<M.x?I.x:M.x,K.y<I.y?K.y<M.y?K.y:M.y:I.y<M.y?I.y:M.y,O,C,
V);O=d(P,N,O,C,V);for(C=t.nextZ;C&&C.z<=O;){if(C!==t.prev&&C!==t.next&&k(K.x,K.y,I.x,I.y,M.x,M.y,C.x,C.y)&&0<=g(C.prev,C,C.next)){t=!1;break a}C=C.nextZ}for(C=t.prevZ;C&&C.z>=G;){if(C!==t.prev&&C!==t.next&&k(K.x,K.y,I.x,I.y,M.x,M.y,C.x,C.y)&&0<=g(C.prev,C,C.next)){t=!1;break a}C=C.prevZ}t=!0}}else t=m(a);if(t)c.push(z.i/h),c.push(a.i/h),c.push(B.i/h),H(a),u=a=B.next;else{if(A)break;a=B;if(a===u){if(!x)q(b(a),c,h,l,p,F,1);else if(1===x){x=c;u=h;z=a;do B=z.prev,t=z.next.next,!n(B,t)&&v(B,z,z.next,t)&&
y(B,t)&&y(t,B)&&(x.push(B.i/u),x.push(z.i/u),x.push(t.i/u),H(z),H(z.next),z=a=t),z=z.next;while(z!==a);a=z;q(a,c,h,l,p,F,2)}else if(2===x)a:{x=a;do{for(u=x.next.next;u!==x.prev;){if(z=x.i!==u.i){z=x;B=u;t=void 0;if(t=z.next.i!==B.i&&z.prev.i!==B.i){t=void 0;b:{t=z;do{if(t.i!==z.i&&t.next.i!==z.i&&t.i!==B.i&&t.next.i!==B.i&&v(t,t.next,z,B)){t=!0;break b}t=t.next}while(t!==z);t=!1}t=!t}K=void 0;if(K=t&&y(z,B)&&y(B,z)){t=z;K=!1;I=(z.x+B.x)/2;B=(z.y+B.y)/2;do t.y>B!==t.next.y>B&&I<(t.next.x-t.x)*(B-t.y)/
(t.next.y-t.y)+t.x&&(K=!K),t=t.next;while(t!==z)}z=K}if(z){a=D(x,u);x=b(x,x.next);a=b(a,a.next);q(x,c,h,l,p,F);q(a,c,h,l,p,F);break a}u=u.next}x=x.next}while(x!==a)}break}}}}}function m(a){var d=a.prev,c=a.next;if(0<=g(d,a,c))return!1;for(var b=a.next.next,h=0;b!==a.prev;){if(k(d.x,d.y,a.x,a.y,c.x,c.y,b.x,b.y)&&0<=g(b.prev,b,b.next))return!1;b=b.next;if(h++>C)return A=!0,!1}return!0}function l(a,d){return a.x-d.x}function h(a,d){var c=d,b=a.x,g=a.y,h=-Infinity,n;do{if(!c)return null;if(g<=c.y&&g>=
c.next.y){var u=c.x+(g-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(u<=b&&u>h){h=u;if(u===b){if(g===c.y)return c;if(g===c.next.y)return c.next}n=c.x<c.next.x?c:c.next}}c=c.next}while(c!==d);if(!n)return null;if(b===h)return n.prev;d=n;for(var u=n.x,l=n.y,p=Infinity,z,c=n.next;c!==d;)b>=c.x&&c.x>=u&&k(g<l?b:h,g,u,l,g<l?h:b,g,c.x,c.y)&&(z=Math.abs(g-c.y)/(b-c.x),(z<p||z===p&&c.x>n.x)&&y(c,a)&&(n=c,p=z)),c=c.next;return n}function d(a,d,c,b,g){a=32767*(a-c)/g;d=32767*(d-b)/g;a=(a|a<<8)&16711935;a=(a|a<<4)&
252645135;a=(a|a<<2)&858993459;d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(a|a<<1)&1431655765|((d|d<<1)&1431655765)<<1}function c(a){var d=a,c=a;do d.x<c.x&&(c=d),d=d.next;while(d!==a);return c}function k(a,d,c,b,g,h,k,n){return 0<=(g-k)*(d-n)-(a-k)*(h-n)&&0<=(a-k)*(b-n)-(c-k)*(d-n)&&0<=(c-k)*(h-n)-(g-k)*(b-n)}function g(a,d,c){return(d.y-a.y)*(c.x-d.x)-(d.x-a.x)*(c.y-d.y)}function n(a,d){return a.x===d.x&&a.y===d.y}function v(a,d,c,b){return n(a,d)&&n(c,b)||n(a,b)&&n(c,d)?
!0:0<g(a,d,c)!==0<g(a,d,b)&&0<g(c,b,a)!==0<g(c,b,d)}function y(a,d){return 0>g(a.prev,a,a.next)?0<=g(a,d,a.next)&&0<=g(a,a.prev,d):0>g(a,d,a.prev)||0>g(a,a.next,d)}function D(a,d){var c=new x(a.i,a.x,a.y),b=new x(d.i,d.x,d.y),g=a.next,h=d.prev;a.next=d;d.prev=a;c.next=g;g.prev=c;b.next=c;c.prev=b;h.next=b;b.prev=h;return b}function p(a,d,c,b){a=new x(a,d,c);b?(a.next=b.next,a.prev=b,b.next.prev=a,b.next=a):(a.prev=a,a.next=a);return a}function H(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=
a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function x(a,d,c){this.i=a;this.x=d;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function F(a,d,c,b){for(var g=0,h=c-b;d<c;d+=b)g+=(a[h]-a[d])*(a[d+1]+a[h+1]),h=d;return g}var C,A;w.deviation=function(a,d,c,b){var g=d&&d.length,h=Math.abs(F(a,0,g?d[0]*c:a.length,c));if(g)for(var g=0,k=d.length;g<k;g++)h-=Math.abs(F(a,d[g]*c,g<k-1?d[g+1]*c:a.length,c));for(g=d=0;g<b.length;g+=3){var k=b[g]*c,n=b[g+1]*c,l=b[g+2]*c;d+=Math.abs((a[k]-
a[l])*(a[n+1]-a[k+1])-(a[k]-a[n])*(a[l+1]-a[k+1]))}return 0===h&&0===d?0:Math.abs((d-h)/h)};w.flatten=function(a){for(var d=a[0][0].length,c={vertices:[],holes:[],dimensions:d},b=0,g=0;g<a.length;g++){for(var h=0;h<a[g].length;h++)for(var k=0;k<d;k++)c.vertices.push(a[g][h][k]);0<g&&(b+=a[g-1].length,c.holes.push(b))}return c};return w})},"esri/views/vectorTiles/LineBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ../2d/engine/webgl/LineTess ./style/StyleLayer".split(" "),
function(w,a,b,q,m,l,h){var d=new l.Tessellator({distanceAlongCorrection:!0});return function(a){function c(d,c,b,h){var g=a.call(this,d,c)||this;g.extrudeVectorsDoubleBuffer=[l.allocExtrudeVectors(),l.allocExtrudeVectors()];g.firstExtrudeVectors=l.allocExtrudeVectors();g.recycledTriangleBridge=l.allocTriangles(20);g.recycledTrianglePie=l.allocTriangles(20);g.lineVertexBuffer=b;g.lineIndexBuffer=h;d=d.getPaintValue("line-pattern",c);g.hasPattern=void 0!==d;return g}b(c,a);Object.defineProperty(c.prototype,
"triangleIndexStart",{get:function(){return this.triangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"triangleIndexCount",{get:function(){return this.triangleElementsCount},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"connectorStart",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"connectorCount",{get:function(){return 0},enumerable:!0,configurable:!0});c.prototype.assignBufferInfo=function(a){a.triangleElementsStart=
this.triangleElementsStart;a.triangleElementsCount=this.triangleElementsCount};c.prototype.processFeatures=function(a,d){this.triangleElementsStart=this.lineIndexBuffer.index;this.triangleElementsCount=0;a&&a.setExtent(this.layerExtent);d=new h.LineLayout(this.layer,this.zoom);for(var c=0,b=this._features;c<b.length;c++){var g=b[c].getGeometry(a);this._processFeature(d,g)}};c.prototype._processFeature=function(a,d){if(d){var c=d.length,b;for(b=0;b<c;b++)this._processGeometry(d[b],a)}};c.prototype._processGeometry=
function(a,d){if(!(2>a.length)){for(var c=a[0],b=a[a.length-1],g=b.x-c.x,b=b.y-c.y,c=1E-6>g*g+b*b,h=a[0],k=1;k<a.length;)g=a[k].x-h.x,b=a[k].y-h.y,1E-6>g*g+b*b?a.splice(k,1):(h=a[k],++k);if(!(2>a.length)){this.vertices=a;this.verticesLen=a.length;this.isClosed=c;this.cap=d.cap;this.join=d.join;this.almostParallelRads=.05;this.veryShallowRads=.1;this.miterSafeRads=l.MITER_SAFE_RADS;this.miterLimitMag=Math.min(d.miterLimit,l.SYSTEM_MAG_LIMIT);this.roundLimitRads=Math.min(d.roundLimit,.5);this.newRoundJoinsSafeRads=
2.3;d=this.lineIndexBuffer.index;for(var g=0,n=void 0,b=this.verticesLen,h=0;h<b;++h){var m=a[h],k=n===this.extrudeVectorsDoubleBuffer[h%2]?this.extrudeVectorsDoubleBuffer[(h+1)%2]:this.extrudeVectorsDoubleBuffer[h%2];h<b-1||!c||this.hasPattern?(this._computeExtrudeVectors(k,h),this._writeGPUVertices(m.x,m.y,g,k),!k.capCenter||c&&h===b-1||this._writeGPUPieElements(k),c&&0===h&&!this.hasPattern&&l.copyExtrudeVectors(this.firstExtrudeVectors,k)):l.copyExtrudeVectors(k,this.firstExtrudeVectors);n&&this._writeGPUBridgeElements(n,
k);h<b-1&&(n=a[h+1],m=l.length([n.x-m.x,n.y-m.y]),g+=m);n=k}this.triangleElementsCount+=3*(this.lineIndexBuffer.index-d)}}};c.prototype._computeExtrudeVectors=function(a,d){var c=this.vertices,b=this.verticesLen,g=this.isClosed,h=c[d],k=[void 0,void 0],n=[void 0,void 0];if(0<d&&d<b-1){var m=c[(d+b-1)%b],C=c[(d+1)%b];l.normalize(k,[h.x-m.x,h.y-m.y]);l.normalize(n,[C.x-h.x,C.y-h.y])}else if(0===d)C=c[(d+1)%b],l.normalize(n,[C.x-h.x,C.y-h.y]),g?(c=c[b-2],l.normalize(k,[h.x-c.x,h.y-c.y])):k=n;else if(d===
b-1)m=c[(d+b-1)%b],l.normalize(k,[h.x-m.x,h.y-m.y]),g?(c=c[1],l.normalize(n,[c.x-h.x,c.y-h.y])):n=k;else{console.error("Vertex index 'i' out of range.");return}g||0!==d?g||d!==b-1?this._computeJoinExtrudeVectors(a,k,n):this._computeCapExtrudeVectors(a,k,n,l.CapPosition.END):this._computeCapExtrudeVectors(a,k,n,l.CapPosition.START)};c.prototype._computeCapExtrudeVectors=function(a,c,b,h){0===this.cap?d.buttCap(a,c,b):1===this.cap?d.roundCap(a,c,b,h,l.getNumberOfSlices(Math.PI),h===l.CapPosition.START?
-1:1):2===this.cap?d.squareCap(a,c,b,h):(d.buttCap(a,c,b),console.error("Unknown cap type!"))};c.prototype._computeJoinExtrudeVectors=function(a,c,b){var g=l.getRads(c,b);if(g>Math.PI-this.almostParallelRads)d.rectJoin(a,c,b);else if(2===this.join||g<this.veryShallowRads)g<this.almostParallelRads?d.fastMiterJoin(a,c,b):g<this.miterSafeRads?d.miterJoin(a,c,b):d.bevelJoin(a,c,b,this.miterLimitMag);else if(0===this.join)d.bevelJoin(a,c,b,1);else if(1===this.join){var h=l.getNumberOfSlices(g);g<this.newRoundJoinsSafeRads?
2>h||g<this.roundLimitRads?d.bevelJoin(a,c,b,1):d.roundJoin(a,c,b,h):d.unitRoundJoin(a,c,b,h)}};c.prototype._writeGPUVertices=function(a,d,c,b){var g;for(g=0;g<b.vectors.count;++g){var h=this.lineVertexBuffer.add(a,d,b.vectors.items[g].vector[0],b.vectors.items[g].vector[1],b.vectors.items[g].texCoords[0],b.vectors.items[g].texCoords[1],c);b.vectors.items[g].base=h}};c.prototype._writeGPUBridgeElements=function(a,c){d.bridge(this.recycledTriangleBridge,a,c);for(a=0;a<this.recycledTriangleBridge.count;++a)c=
this.recycledTriangleBridge.items[a],this.lineIndexBuffer.add(c.v1.base,c.v2.base,c.v3.base)};c.prototype._writeGPUPieElements=function(a){d.pie(this.recycledTrianglePie,a);for(a=0;a<this.recycledTrianglePie.count;++a){var c=this.recycledTrianglePie.items[a];this.lineIndexBuffer.add(c.v1.base,c.v2.base,c.v3.base)}};return c}(m)})},"esri/views/2d/engine/webgl/LineTess":function(){define(["require","exports"],function(w,a){function b(a){var d={items:[],count:0},c;for(c=0;c<a;++c)d.items.push(void 0);
return d}function q(a,d){C.vector[0]=a.vector[0];C.vector[1]=a.vector[1];C.texCoords[0]=a.texCoords[0];C.texCoords[1]=a.texCoords[1];C.direction[0]=a.direction[0];C.direction[1]=a.direction[1];C.base=a.base;a.vector[0]=d.vector[0];a.vector[1]=d.vector[1];a.texCoords[0]=d.texCoords[0];a.texCoords[1]=d.texCoords[1];a.direction[0]=d.direction[0];a.direction[1]=d.direction[1];a.base=d.base;d.vector[0]=C.vector[0];d.vector[1]=C.vector[1];d.texCoords[0]=C.texCoords[0];d.texCoords[1]=C.texCoords[1];d.direction[0]=
C.direction[0];d.direction[1]=C.direction[1];d.base=C.base}function m(a,d){return a[0]*d[0]+a[1]*d[1]}function l(a){return Math.sqrt(m(a,a))}function h(a,d){var c=l(d);a[0]=d[0]/c;a[1]=d[1]/c;return a}function d(a,d){a[0]=-d[1];a[1]=d[0];return a}function c(a,d){return a[0]*d[1]-a[1]*d[0]}function k(a,d){a[0]=-d[0];a[1]=-d[1];return a}function g(a,d,c){a[0]=d[0]*c;a[1]=d[1]*c;return a}function n(a,d,c){a[0]=d[0]+c[0];a[1]=d[1]+c[1];return a}function v(a,d){a=m(a,d);return.999<a?0:-.999>a?Math.PI:
Math.acos(a)}function y(a,d,c,b,h){if(0===b)a.count=0;else{var k=l(d),t=g(A[0],d,1/k);c=g(A[1],c,1/k);t=v(t,c);t=(h?-1:1)*t/b;h=Math.cos(t);t=Math.sin(t);c=d[0];var n=d[1];for(d=0;d<b-1;++d)k=c,c=h*k-t*n,n=t*k+h*n,a.items[d][0]=c,a.items[d][1]=n;a.count=b-1}}function D(a){var d=a.count,c=Math.floor(d/2),b;for(b=0;b<c;++b){var g=a.items[b];a.items[b]=a.items[d-b-1];a.items[d-b-1]=g}}Object.defineProperty(a,"__esModule",{value:!0});var p;(function(a){a[a.ENTRY=1]="ENTRY";a[a.EXIT=2]="EXIT";a[a.CAP=
3]="CAP"})(p=a.VectorRole||(a.VectorRole={}));var H;(function(a){a[a.START=1]="START";a[a.END=2]="END"})(H=a.CapPosition||(a.CapPosition={}));a.SYSTEM_MAG_LIMIT=3.8;a.MITER_SAFE_RADS=2*Math.acos(1/a.SYSTEM_MAG_LIMIT);var x=a.SYSTEM_MAG_LIMIT*a.SYSTEM_MAG_LIMIT,F=16/(2*Math.PI);a.allocTriangles=function(a){var d={items:[],count:0},c;for(c=0;c<a;++c)d.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,
void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return d};a.allocExtrudeVectors=function(){var a={items:[],count:0},d;for(d=0;30>d;++d)a.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});d={};d[p.ENTRY]=b(20);d[p.EXIT]=b(20);d[p.CAP]=b(20);return{vectors:a,lists:d}};a.copyExtrudeVectors=function(a,d){var c;for(c=0;c<d.vectors.count;++c)a.vectors.items[c].vector[0]=d.vectors.items[c].vector[0],a.vectors.items[c].vector[1]=
d.vectors.items[c].vector[1],a.vectors.items[c].texCoords[0]=d.vectors.items[c].texCoords[0],a.vectors.items[c].texCoords[1]=d.vectors.items[c].texCoords[1],a.vectors.items[c].direction[0]=d.vectors.items[c].direction[0],a.vectors.items[c].direction[1]=d.vectors.items[c].direction[1],a.vectors.items[c].base=d.vectors.items[c].base;a.vectors.count=d.vectors.count;var b=d.lists[p.ENTRY],g=a.lists[p.ENTRY],h=d.lists[p.EXIT],k=a.lists[p.EXIT],n=d.lists[p.CAP],t=a.lists[p.CAP];for(c=0;c<b.count;++c)g.items[c]=
b.items[c];g.count=b.count;for(c=0;c<h.count;++c)k.items[c]=h.items[c];k.count=h.count;for(c=0;c<n.count;++c)t.items[c]=n.items[c];t.count=n.count;a.capCenter=d.capCenter};var C={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};a.swapExtrudeVectors=q;var A=[];for(w=0;32>w;++w)A.push([void 0,void 0]);var u=function(a){var d={items:[],count:0},c;for(c=0;c<a;++c)d.items.push([void 0,void 0]);return d}(16);a.length=l;a.normalize=h;a.getNumberOfSlices=function(a){return Math.max(Math.round(a*
F),1)};a.getRads=v;a.reverse=D;var z=[void 0,void 0],G=[void 0,void 0],P=[0,0],N=[0,0],E=[0,0],U=[0,0],S=Math.cos(Math.PI/4),Q=Math.sin(Math.PI/4),X=Math.sqrt(2);w=function(){function a(a){this._distanceAlongCorrection=a.distanceAlongCorrection}a.prototype.bridge=function(a,d,c){var b=d.vectors;d=d.lists[p.EXIT];var g=c.vectors,h=c.lists[p.ENTRY],k,n;if(d.count===h.count+1)c=d.items,k=b.items,n=h.items,g=g.items;else if(h.count===d.count+1)c=h.items,k=g.items,n=d.items,g=b.items;else if(d.count===
h.count)c=h.items,k=g.items,n=d.items,g=b.items;else{console.error("Cannot bridge "+d.count+" to "+h.count+".");a.count=0;return}b=d.count+h.count-2;a.count=b;z[0]=c;z[1]=n;G[0]=k;G[1]=g;for(d=0;d<b;++d)c=a.items[d],k=(d+0)%2,k=G[k][z[k][Math.floor((d+0)/2)]],c.v1.vector[0]=k.vector[0],c.v1.vector[1]=k.vector[1],c.v1.texCoords[0]=k.texCoords[0],c.v1.texCoords[1]=k.texCoords[1],c.v1.direction[0]=k.direction[0],c.v1.direction[1]=k.direction[1],c.v1.base=k.base,k=(d+1)%2,k=G[k][z[k][Math.floor((d+1)/
2)]],c.v2.vector[0]=k.vector[0],c.v2.vector[1]=k.vector[1],c.v2.texCoords[0]=k.texCoords[0],c.v2.texCoords[1]=k.texCoords[1],c.v2.direction[0]=k.direction[0],c.v2.direction[1]=k.direction[1],c.v2.base=k.base,k=(d+2)%2,k=G[k][z[k][Math.floor((d+2)/2)]],c.v3.vector[0]=k.vector[0],c.v3.vector[1]=k.vector[1],c.v3.texCoords[0]=k.texCoords[0],c.v3.texCoords[1]=k.texCoords[1],c.v3.direction[0]=k.direction[0],c.v3.direction[1]=k.direction[1],c.v3.base=k.base,k=c.v1.base&&c.v1.base.point||P,n=c.v2.base&&c.v2.base.point||
P,g=c.v3.base&&c.v3.base.point||P,N[0]=k[0]+c.v1.vector[0],N[1]=k[1]+c.v1.vector[1],E[0]=n[0]+c.v2.vector[0],E[1]=n[1]+c.v2.vector[1],U[0]=g[0]+c.v3.vector[0],U[1]=g[1]+c.v3.vector[1],0>(E[0]-N[0])*(U[1]-N[1])-(U[0]-N[0])*(E[1]-N[1])||q(c.v2,c.v3)};a.prototype.pie=function(a,d){if(0===d.lists[p.CAP].count)a.count=0;else if(1===d.lists[p.CAP].count)console.error("A single vector is not enough to define a pie."),a.count=0;else{a.count=d.lists[p.CAP].count-1;var c;for(c=0;c<a.count;++c){var b=a.items[c],
g=d.vectors.items[d.lists[p.CAP].items[c]];b.v1.vector[0]=g.vector[0];b.v1.vector[1]=g.vector[1];b.v1.texCoords[0]=g.texCoords[0];b.v1.texCoords[1]=g.texCoords[1];b.v1.direction[0]=g.direction[0];b.v1.direction[1]=g.direction[1];b.v1.base=g.base;g=d.vectors.items[d.lists[p.CAP].items[c+1]];b.v2.vector[0]=g.vector[0];b.v2.vector[1]=g.vector[1];b.v2.texCoords[0]=g.texCoords[0];b.v2.texCoords[1]=g.texCoords[1];b.v2.direction[0]=g.direction[0];b.v2.direction[1]=g.direction[1];b.v2.base=g.base;g=d.vectors.items[d.capCenter];
b.v3.vector[0]=g.vector[0];b.v3.vector[1]=g.vector[1];b.v3.texCoords[0]=g.texCoords[0];b.v3.texCoords[1]=g.texCoords[1];b.v3.direction[0]=g.direction[0];b.v3.direction[1]=g.direction[1];b.v3.base=g.base;var g=b.v1.base&&b.v1.base.point||P,h=b.v2.base&&b.v2.base.point||P,k=b.v3.base&&b.v3.base.point||P;N[0]=g[0]+b.v1.vector[0];N[1]=g[1]+b.v1.vector[1];E[0]=h[0]+b.v2.vector[0];E[1]=h[1]+b.v2.vector[1];U[0]=k[0]+b.v3.vector[0];U[1]=k[1]+b.v3.vector[1];0>(E[0]-N[0])*(U[1]-N[1])-(U[0]-N[0])*(E[1]-N[1])||
q(b.v2,b.v3)}}};a.prototype.buttCap=function(a,d,c){this.fastMiterJoin(a,d,c)};a.prototype.roundCap=function(a,d,c,b,g,h){void 0===h&&(h=0);this.fastMiterJoin(a,d,c);c=b===H.START?0:1;b=b===H.START?1:0;a.capCenter=a.vectors.count;d=a.vectors.items[a.capCenter];d.vector[0]=0;d.vector[1]=0;d.texCoords[0]=0;d.texCoords[1]=0;d.direction[0]=0;d.direction[1]=0;++a.vectors.count;y(u,a.vectors.items[c].vector,a.vectors.items[b].vector,g,!1);g=a.vectors.count;d=a.lists[p.CAP];d.items[0]=c;c=a.vectors.items[c].texCoords[1];
var k=a.vectors.items[b].texCoords[1],n;for(n=0;n<u.count;++n){var l=h*(1-Math.abs(u.count/2-n)/(u.count/2)),t=c+n/(u.count-1)*(k-c),m=u.items[n],I=a.vectors.items[g+n];I.vector[0]=m[0];I.vector[1]=m[1];I.texCoords[0]=l;I.texCoords[1]=t;I.direction[0]=0;I.direction[1]=0;d.items[n+1]=g+n}d.items[u.count+1]=b;d.count=u.count+2;a.vectors.count=g+u.count};a.prototype.squareCap=function(a,d,c,b){this.fastMiterJoin(a,d,c);d=b===H.START?0:1;c=b===H.START?1:0;var h=A[0],k=A[1],n=A[2],l=A[3];b=A[4];var t=
a.vectors.items[d].vector;h[0]=S*t[0]-Q*t[1];h[1]=Q*t[0]+S*t[1];g(l,h,X);k[0]=S*h[0]-Q*h[1];k[1]=Q*h[0]+S*h[1];n[0]=S*k[0]-Q*k[1];n[1]=Q*k[0]+S*k[1];g(b,n,X);d=a.vectors.items[d];d.vector[0]=l[0];d.vector[1]=l[1];a=a.vectors.items[c];a.vector[0]=b[0];a.vector[1]=b[1]};a.prototype.fastMiterJoin=function(a,c,b){b=d(A[0],b);c=k(A[1],b);var g=a.vectors.items[0];g.vector[0]=b[0];g.vector[1]=b[1];g.texCoords[0]=0;g.texCoords[1]=-1;g.direction[0]=0;g.direction[1]=0;b=a.vectors.items[1];b.vector[0]=c[0];
b.vector[1]=c[1];b.texCoords[0]=0;b.texCoords[1]=1;b.direction[0]=0;b.direction[1]=0;a.vectors.count=2;c=a.lists[p.ENTRY];c.items[0]=0;c.items[1]=1;c.count=2;c=a.lists[p.EXIT];c.items[0]=0;c.items[1]=1;c.count=2;a.lists[p.CAP].count=0;a.capCenter=void 0};a.prototype.miterJoin=function(a,c,b){var n=d(A[0],c),l=d(A[1],b),t=A[2];t[0]=n[0]+l[0];t[1]=n[1]+l[1];l=h(A[3],t);n=m(l,n);l=g(A[4],l,1/n);n=k(A[5],l);this._distanceAlongCorrection?(t=a.vectors.items[0],t.vector[0]=l[0],t.vector[1]=l[1],t.texCoords[0]=
0,t.texCoords[1]=-1,t.direction[0]=c[0],t.direction[1]=c[1],t=a.vectors.items[1],t.vector[0]=n[0],t.vector[1]=n[1],t.texCoords[0]=0,t.texCoords[1]=1,t.direction[0]=c[0],t.direction[1]=c[1],c=a.vectors.items[2],c.vector[0]=l[0],c.vector[1]=l[1],c.texCoords[0]=0,c.texCoords[1]=-1,c.direction[0]=b[0],c.direction[1]=b[1],c=a.vectors.items[3],c.vector[0]=n[0],c.vector[1]=n[1],c.texCoords[0]=0,c.texCoords[1]=1,c.direction[0]=b[0],c.direction[1]=b[1],a.vectors.count=4,b=a.lists[p.ENTRY],b.items[0]=0,b.items[1]=
1,b.count=2,b=a.lists[p.EXIT],b.items[0]=2,b.items[1]=3):(t=a.vectors.items[0],t.vector[0]=l[0],t.vector[1]=l[1],t.texCoords[0]=0,t.texCoords[1]=-1,t.direction[0]=0,t.direction[1]=0,t=a.vectors.items[1],t.vector[0]=n[0],t.vector[1]=n[1],t.texCoords[0]=0,t.texCoords[1]=1,t.direction[0]=0,t.direction[1]=0,a.vectors.count=2,b=a.lists[p.ENTRY],b.items[0]=0,b.items[1]=1,b.count=2,b=a.lists[p.EXIT],b.items[0]=0,b.items[1]=1);b.count=2;a.lists[p.CAP].count=0;a.capCenter=void 0};a.prototype.bevelJoin=function(a,
b,l,y){var t=y*y;y=c(b,l);var u=0<y?[-1,1]:[1,-1],v=u[0],u=u[1],z=0<y?k(A[0],d(A[1],b)):d(A[2],b),C=0<y?k(A[3],d(A[4],l)):d(A[5],l),H=A[6];H[0]=z[0]+C[0];H[1]=z[1]+C[1];var F=h(A[7],H),q=k(A[8],F),I=m(F,z),H=c(F,z),B=Math.abs(H/I),H=1+B*B,G=H<x?[B,this._distanceAlongCorrection]:[Math.sqrt(x-1),!0],K=G[0],G=G[1],E=H<t?[B,this._distanceAlongCorrection]:[Math.sqrt(t-1),!0],B=E[0];(E=E[1])&&G?(G=a.vectors.items[0],n(G.vector,k(A[9],z),g(A[10],k(A[11],b),K)),G.texCoords[0]=0,G.texCoords[1]=v,G.direction[0]=
this._distanceAlongCorrection?b[0]:0,G.direction[1]=this._distanceAlongCorrection?b[1]:0,q=a.vectors.items[1],n(q.vector,k(A[12],C),g(A[13],l,K)),q.texCoords[0]=0,q.texCoords[1]=v,q.direction[0]=this._distanceAlongCorrection?l[0]:0,q.direction[1]=this._distanceAlongCorrection?l[1]:0,v=a.vectors.items[2],v.vector[0]=0,v.vector[1]=0,v.texCoords[0]=0,v.texCoords[1]=0,v.direction[0]=0,v.direction[1]=0,v=a.vectors.items[3],n(v.vector,z,g(A[14],b,B)),v.texCoords[0]=0,v.texCoords[1]=u,v.direction[0]=this._distanceAlongCorrection?
b[0]:0,v.direction[1]=this._distanceAlongCorrection?b[1]:0,b=a.vectors.items[4],n(b.vector,C,g(A[15],k(A[16],l),B)),b.texCoords[0]=0,b.texCoords[1]=u,b.direction[0]=this._distanceAlongCorrection?l[0]:0,b.direction[1]=this._distanceAlongCorrection?l[1]:0,a.vectors.count=5,l=a.lists[p.ENTRY],l.items[0]=0,l.items[1]=2,l.items[2]=3,l.count=3,l=a.lists[p.EXIT],l.items[0]=1,l.items[1]=2,l.items[2]=4,l.count=3,H<t?(t=a.lists[p.CAP],t.count=0,a.capCenter=void 0):(t=a.lists[p.CAP],t.items[0]=3,t.items[1]=
4,t.count=2,a.capCenter=2)):!E&&G?(G=a.vectors.items[0],n(G.vector,k(A[9],z),g(A[10],k(A[11],b),K)),G.texCoords[0]=0,G.texCoords[1]=v,G.direction[0]=this._distanceAlongCorrection?b[0]:0,G.direction[1]=this._distanceAlongCorrection?b[1]:0,q=a.vectors.items[1],n(q.vector,k(A[12],C),g(A[13],l,K)),q.texCoords[0]=0,q.texCoords[1]=v,q.direction[0]=this._distanceAlongCorrection?l[0]:0,q.direction[1]=this._distanceAlongCorrection?l[1]:0,v=a.vectors.items[2],v.vector[0]=0,v.vector[1]=0,v.texCoords[0]=0,v.texCoords[1]=
0,v.direction[0]=0,v.direction[1]=0,v=a.vectors.items[3],g(v.vector,F,1/I),v.texCoords[0]=0,v.texCoords[1]=u,v.direction[0]=0,v.direction[1]=0,a.vectors.count=4,l=a.lists[p.ENTRY],l.items[0]=0,l.items[1]=2,l.items[2]=3,l.count=3,l=a.lists[p.EXIT],l.items[0]=1,l.items[1]=2,l.items[2]=3,l.count=3,a.lists[p.CAP].count=0,a.capCenter=void 0):E&&!G?(G=a.vectors.items[0],g(G.vector,q,1/I),G.texCoords[0]=0,G.texCoords[1]=v,G.direction[0]=0,G.direction[1]=0,q=a.vectors.items[1],q.vector[0]=0,q.vector[1]=0,
q.texCoords[0]=0,q.texCoords[1]=0,q.direction[0]=0,q.direction[1]=0,v=a.vectors.items[2],n(v.vector,z,g(A[9],b,B)),v.texCoords[0]=0,v.texCoords[1]=u,v.direction[0]=this._distanceAlongCorrection?b[0]:0,v.direction[1]=this._distanceAlongCorrection?b[1]:0,v=a.vectors.items[3],n(v.vector,C,g(A[10],k(A[11],l),B)),v.texCoords[0]=0,v.texCoords[1]=u,v.direction[0]=this._distanceAlongCorrection?l[0]:0,v.direction[1]=this._distanceAlongCorrection?l[1]:0,a.vectors.count=4,l=a.lists[p.ENTRY],l.items[0]=0,l.items[1]=
1,l.items[2]=2,l.count=3,l=a.lists[p.EXIT],l.items[0]=0,l.items[1]=1,l.items[2]=3,l.count=3,H<t?(t=a.lists[p.CAP],t.count=0,a.capCenter=void 0):(t=a.lists[p.CAP],t.items[0]=2,t.items[1]=3,t.count=2,a.capCenter=1)):E||G||(G=a.vectors.items[0],g(G.vector,q,1/I),G.texCoords[0]=0,G.texCoords[1]=v,G.direction[0]=0,G.direction[1]=0,q=a.vectors.items[1],g(q.vector,F,1/I),q.texCoords[0]=0,q.texCoords[1]=u,q.direction[0]=0,q.direction[1]=0,a.vectors.count=2,l=a.lists[p.ENTRY],l.items[0]=0,l.items[1]=1,l.count=
2,l=a.lists[p.EXIT],l.items[0]=0,l.items[1]=1,l.count=2,a.lists[p.CAP].count=0,a.capCenter=void 0);0>y&&(D(a.lists[p.ENTRY]),D(a.lists[p.EXIT]))};a.prototype.roundJoin=function(a,b,l,v){var t=c(b,l),z=0<t?[-1,1]:[1,-1],C=z[0],z=z[1],H=0<t?k(A[0],d(A[1],b)):d(A[2],b),F=0<t?k(A[3],d(A[4],l)):d(A[5],l),q=A[6];q[0]=H[0]+F[0];q[1]=H[1]+F[1];var G=h(A[7],q),q=k(A[8],G),B=m(G,H),G=c(G,H),G=Math.abs(G/B),E=1+G*G<x?[G,this._distanceAlongCorrection]:[Math.sqrt(x-1),!0],G=E[0];E[1]?(E=a.vectors.items[0],E.vector[0]=
H[0],E.vector[1]=H[1],E.texCoords[0]=0,E.texCoords[1]=z,E.direction[0]=0,E.direction[1]=0,E=a.vectors.items[1],E.vector[0]=F[0],E.vector[1]=F[1],E.texCoords[0]=0,E.texCoords[1]=z,E.direction[0]=0,E.direction[1]=0,E=a.vectors.items[2],n(E.vector,k(A[9],H),g(A[10],k(A[11],b),G)),E.texCoords[0]=0,E.texCoords[1]=C,E.direction[0]=this._distanceAlongCorrection?b[0]:0,E.direction[1]=this._distanceAlongCorrection?b[1]:0,b=a.vectors.items[3],n(b.vector,k(A[12],F),g(A[13],l,G)),b.texCoords[0]=0,b.texCoords[1]=
C,b.direction[0]=this._distanceAlongCorrection?l[0]:0,b.direction[1]=this._distanceAlongCorrection?l[1]:0,l=a.vectors.items[4],l.vector[0]=0,l.vector[1]=0,l.texCoords[0]=0,l.texCoords[1]=0,l.direction[0]=0,l.direction[1]=0,a.vectors.count=5,l=a.lists[p.ENTRY],l.items[0]=2,l.items[1]=4,l.items[2]=0,l.count=3,l=a.lists[p.EXIT],l.items[0]=3,l.items[1]=4,l.items[2]=1,l.count=3,a.capCenter=4):(E=a.vectors.items[0],E.vector[0]=H[0],E.vector[1]=H[1],E.texCoords[0]=0,E.texCoords[1]=z,E.direction[0]=0,E.direction[1]=
0,E=a.vectors.items[1],E.vector[0]=F[0],E.vector[1]=F[1],E.texCoords[0]=0,E.texCoords[1]=z,E.direction[0]=0,E.direction[1]=0,E=a.vectors.items[2],g(E.vector,q,1/B),E.texCoords[0]=0,E.texCoords[1]=C,E.direction[0]=0,E.direction[1]=0,b=a.vectors.items[3],b.vector[0]=0,b.vector[1]=0,b.texCoords[0]=0,b.texCoords[1]=0,b.direction[0]=0,b.direction[1]=0,a.vectors.count=4,l=a.lists[p.ENTRY],l.items[0]=2,l.items[1]=3,l.items[2]=0,l.count=3,l=a.lists[p.EXIT],l.items[0]=2,l.items[1]=3,l.items[2]=1,l.count=3,
a.capCenter=3);y(u,H,F,v,0>t);v=a.vectors.count;H=a.lists[p.CAP];for(F=H.items[0]=0;F<u.count;++F)l=u.items[F],C=a.vectors.items[v+F],C.vector[0]=l[0],C.vector[1]=l[1],C.texCoords[0]=0,C.texCoords[1]=z,C.direction[0]=0,C.direction[1]=0,H.items[F+1]=v+F;H.items[u.count+1]=1;H.count=u.count+2;a.vectors.count=v+u.count;0>t&&(D(a.lists[p.ENTRY]),D(a.lists[p.EXIT]))};a.prototype.unitRoundJoin=function(a,b,g,h){var l=c(b,g),n=0<l?[-1,1]:[1,-1],v=n[0],n=n[1];b=0<l?k(A[0],d(A[1],b)):d(A[2],b);g=0<l?k(A[3],
d(A[4],g)):d(A[5],g);var m=a.vectors.items[0];m.vector[0]=b[0];m.vector[1]=b[1];m.texCoords[0]=0;m.texCoords[1]=n;m.direction[0]=0;m.direction[1]=0;m=a.vectors.items[1];m.vector[0]=g[0];m.vector[1]=g[1];m.texCoords[0]=0;m.texCoords[1]=n;m.direction[0]=0;m.direction[1]=0;m=a.vectors.items[2];k(m.vector,b);m.texCoords[0]=0;m.texCoords[1]=v;m.direction[0]=0;m.direction[1]=0;m=a.vectors.items[3];k(m.vector,g);m.texCoords[0]=0;m.texCoords[1]=v;m.direction[0]=0;m.direction[1]=0;v=a.vectors.items[4];v.vector[0]=
0;v.vector[1]=0;v.texCoords[0]=0;v.texCoords[1]=0;v.direction[0]=0;v.direction[1]=0;a.vectors.count=5;v=a.lists[p.ENTRY];v.items[0]=2;v.items[1]=0;v.count=2;v=a.lists[p.EXIT];v.items[0]=3;v.items[1]=1;v.count=2;a.capCenter=4;y(u,b,g,h,0>l);h=a.vectors.count;b=a.lists[p.CAP];for(v=b.items[0]=0;v<u.count;++v)g=u.items[v],m=a.vectors.items[h+v],m.vector[0]=g[0],m.vector[1]=g[1],m.texCoords[0]=0,m.texCoords[1]=n,m.direction[0]=0,m.direction[1]=0,b.items[v+1]=h+v;b.items[u.count+1]=1;b.count=u.count+2;
a.vectors.count=h+u.count;0>l&&(D(a.lists[p.ENTRY]),D(a.lists[p.EXIT]))};a.prototype.rectJoin=function(a,c,b){c=d(A[0],c);b=d(A[1],b);var g=a.vectors.items[0];g.vector[0]=c[0];g.vector[1]=c[1];g.texCoords[0]=0;g.texCoords[1]=-1;g.direction[0]=0;g.direction[1]=0;g=a.vectors.items[1];g.vector[0]=b[0];g.vector[1]=b[1];g.texCoords[0]=0;g.texCoords[1]=-1;g.direction[0]=0;g.direction[1]=0;g=a.vectors.items[2];k(g.vector,c);g.texCoords[0]=0;g.texCoords[1]=1;g.direction[0]=0;g.direction[1]=0;c=a.vectors.items[3];
k(c.vector,b);c.texCoords[0]=0;c.texCoords[1]=1;c.direction[0]=0;c.direction[1]=0;a.vectors.count=4;c=a.lists[p.ENTRY];c.items[0]=0;c.items[1]=2;c.count=2;c=a.lists[p.EXIT];c.items[0]=1;c.items[1]=3;c.count=2;a.capCenter=void 0};return a}();a.Tessellator=w})},"esri/views/vectorTiles/style/StyleLayer":function(){define(["require","exports","./StyleDefinition","./StyleProperty","./Filter"],function(w,a,b,q,m){Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(a,d,c){this.type=
a;this.id=d.id;this.source=d.source;this.sourceLayer=d["source-layer"];this.minzoom=d.minzoom;this.maxzoom=d.maxzoom;this.filter=d.filter;this.layout=d.layout;this.paint=d.paint;this.z=c;switch(a){case 0:this._layoutDefinition=b.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=b.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=b.StyleDefinition.fillLayoutDefinition;this._paintDefinition=b.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=
b.StyleDefinition.lineLayoutDefinition;this._paintDefinition=b.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=b.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=b.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}a.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=m.createFilter(this.filter)};a.prototype.hasLayoutProperty=
function(a){var d=this._layoutProperties;return d&&d[a]?!0:!1};a.prototype.hasPaintProperty=function(a){var d=this._paintProperties;return d?void 0!==d[a]:!1};a.prototype.getLayoutValue=function(a,d){var c,b=this._layoutProperties;b&&(b=b[a])&&(c=b.getValue(d));a=this._layoutDefinition[a];void 0===c&&(c=a["default"]);"enum"===a.type&&(c=a.values.indexOf(c));return c};a.prototype.getPaintValue=function(a,d){var c,b=this._paintProperties;b&&(b=b[a])&&(c=b.getValue(d));a=this._paintDefinition[a];void 0===
c&&(c=a["default"]);"enum"===a.type&&(c=a.values.indexOf(c));return c};a.prototype._parseLayout=function(a){var d={},c;for(c in a)d[c]=new q(this._layoutDefinition[c],a[c]);return d};a.prototype._parsePaint=function(a){var d={},c;for(c in a)d[c]=new q(this._paintDefinition[c],a[c]);return d};return a}();a.StyleLayer=w;w=function(){return function(a,b){this.cap=a.getLayoutValue("line-cap",b);this.join=a.getLayoutValue("line-join",b);this.miterLimit=a.getLayoutValue("line-miter-limit",b);this.roundLimit=
a.getLayoutValue("line-round-limit",b)}}();a.LineLayout=w;w=function(){return function(a,b,d){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",b);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b);this.optional=a.getLayoutValue("icon-optional",b);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",b);this.size=a.getLayoutValue("icon-size",b);this.rotate=a.getLayoutValue("icon-rotate",b);this.padding=a.getLayoutValue("icon-padding",b);this.keepUpright=a.getLayoutValue("icon-keep-upright",
b);this.offset=a.getLayoutValue("icon-offset",b);2===this.rotationAlignment&&(this.rotationAlignment=d?0:1)}}();a.IconLayout=w;w=function(){return function(a,b,d){this.allowOverlap=a.getLayoutValue("text-allow-overlap",b);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b);this.optional=a.getLayoutValue("text-optional",b);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b);this.font=a.getLayoutValue("text-font",b);this.maxWidth=a.getLayoutValue("text-max-width",b);this.lineHeight=
a.getLayoutValue("text-line-height",b);this.letterSpacing=a.getLayoutValue("text-letter-spacing",b);this.justify=a.getLayoutValue("text-justify",b);this.anchor=a.getLayoutValue("text-anchor",b);this.maxAngle=a.getLayoutValue("text-max-angle",b);this.size=a.getLayoutValue("text-size",b);this.rotate=a.getLayoutValue("text-rotate",b);this.padding=a.getLayoutValue("text-padding",b);this.keepUpright=a.getLayoutValue("text-keep-upright",b);this.transform=a.getLayoutValue("text-transform",b);this.offset=
a.getLayoutValue("text-offset",b);2===this.rotationAlignment&&(this.rotationAlignment=d?0:1)}}();a.TextLayout=w})},"esri/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(w,a){Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(){}a.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};a.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};a.lineLayoutDefinition=
{visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};a.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",
minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean",
"default":!1},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number","default":1.2},"text-letter-spacing":{type:"number","default":0},
"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],"default":"none"},
"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};a.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};a.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean",
"default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};a.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,
0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}};a.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,
0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",
minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};a.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},
"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};a.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,
"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};return a}();a.StyleDefinition=w})},"esri/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(w,a,b,q){return function(){function a(b,h){switch(b.type){case "number":b=!0;break;case "color":b=!0;h=a._parseColor(h);break;case "array":b="number"===b.value;break;default:b=!1}this.getValue=b?this._interpolate(h):this._piecewise(h)}a.prototype._piecewise=
function(a){var b=a.stops;return b?function(a){var d=b.length;if(0!==d){for(var k=0,g=0;g<d;g++)if(b[g][0]<=a)k=g;else break;return b[k][1]}}:function(){return a}};a.prototype._interpolate=function(a){var b=a.stops;if(b){var d=a.base||1;return function(a){for(var c,g,h=b.length,l=0;l<h;l++){var m=b[l];if(m[0]<=a)c=m;else{g=m;break}}if(c&&g){l=g[0]-c[0];a-=c[0];a=1===d?a/l:(Math.pow(d,a)-1)/(Math.pow(d,l)-1);if(Array.isArray(c[1])){c=c[1];g=g[1];h=[];for(l=0;l<c.length;l++)h.push(q.interpolate(c[l],
g[l],a));return h}return q.interpolate(c[1],g[1],a)}if(c)return c[1];if(g)return g[1]}}return function(){return a}};a._parseColor=function(l){if(Array.isArray(l))return l;if("string"===typeof l)return l=new b(l),b.toUnitRGBA(l);if(l&&l.stops)return l.stops=l.stops.map(function(b){return[b[0],a._parseColor(b[1])]}),l;throw Error("Incorrect color definition "+l);};return a}()})},"esri/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(w,a){return function(){function a(b,
m,l){this._op=b;"$type"===m?(this._val=l instanceof Array?l.map(function(b){return a._types.indexOf(b)}):a._types.indexOf(l),this._op+=11):(this._key=m,this._val=l)}a.prototype.filter=function(a){switch(this._op){case 0:return this._val;case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=this._val;case 6:return a.values[this._key]>=this._val;
case 7:return-1!==this._val.indexOf(a.values[this._key]);case 8:return-1===this._val.indexOf(a.values[this._key]);case 9:for(var b=0,l=this._val;b<l.length;b++){var h=l[b];if(h.filter(a))return!0}return!1;case 10:b=0;for(l=this._val;b<l.length;b++)if(h=l[b],!h.filter(a))return!1;return!0;case 11:b=0;for(l=this._val;b<l.length;b++)if(h=l[b],h.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<this._val;case 15:return a.type>this._val;
case 16:return a.type>=this._val;case 17:return a.type<=this._val;case 18:return-1!==this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}};a.createFilter=function(b){if(!b)return new a(0,void 0,!0);var m=b[0];if(1>=b.length)return new a(0,void 0,"any"!==m);switch(m){case "\x3d\x3d":return new a(1,b[1],b[2]);case "!\x3d":return new a(2,b[1],b[2]);case "\x3e":return new a(4,b[1],b[2]);case "\x3c":return new a(3,b[1],b[2]);case "\x3e\x3d":return new a(6,b[1],b[2]);case "\x3c\x3d":return new a(5,
b[1],b[2]);case "in":return new a(7,b[1],b.slice(2));case "!in":return new a(8,b[1],b.slice(2));case "any":return new a(9,void 0,b.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,b.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,b.slice(1).map(a.createFilter.bind(this)));default:throw Error("invalid operator: "+m);}};a._types=["Unknown","Point","LineString","Polygon"];return a}()})},"esri/views/vectorTiles/SymbolBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ../2d/engine/webgl/Geometry ./style/StyleLayer ./Placement ./GeometryUtils ./TextShaping dojox/string/BidiEngine".split(" "),
function(w,a,b,q,m,l,h,d,c,k,g){function n(a,d){if(a.iconMosaicItem&&d.iconMosaicItem){if(a.iconMosaicItem.page!==d.iconMosaicItem.page)return a.iconMosaicItem.page<d.iconMosaicItem.page?-1:1}else{if(a.iconMosaicItem&&!d.iconMosaicItem)return 1;if(!a.iconMosaicItem&&d.iconMosaicItem)return-1}return 0}var v=function(){return function(){}}(),y=function(){return function(a,d,c,b){this.line=d;this.shaping=a;this.iconMosaicItem=c;this.anchor=b}}();(function(){return function(){}})();return function(a){function m(d,
c,b,g,h,k,l,n){d=a.call(this,d,c)||this;d._markerRatio=1;d._markerMap=new Map;d._glyphMap=new Map;d._glyphBufferDataStorage=new Map;d._markerVertexBuffer=b;d._markerIndexBuffer=g;d._textVertexBuffer=h;d._textIndexBuffer=k;d._placementEngine=l;d._workerTileHandler=n;return d}b(m,a);Object.defineProperty(m.prototype,"markerPageMap",{get:function(){return this._markerMap},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"glyphsPageMap",{get:function(){return this._glyphMap},enumerable:!0,
configurable:!0});Object.defineProperty(m.prototype,"textIndexStart",{get:function(){return this._textTriangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"textIndexCount",{get:function(){return this._textTriangleElementsNum},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"sdfMarker",{get:function(){return!1},enumerable:!0,configurable:!0});m.prototype.copy=function(a,d,c,b,g){g=new m(this.layer,this.zoom,a,d,c,b,g,this._workerTileHandler);g.layerIndex=
this.layerIndex;g.layerExtent=this.layerExtent;g._markerVertexStart=a.index;g._markerTriangleElementsStart=d.index;g._textVertexStart=c.index;g._textTriangleElementsStart=b.index;g._markerTriangleElementsNum=0;g._textTriangleElementsNum=0;g._symbolInstances=this._symbolInstances;g._workerTileHandler=this._workerTileHandler;g._font=this._font;g._textLayout=this._textLayout;g._markerLayout=this._markerLayout;g._isLinePlacement=this._isLinePlacement;g._avoidEdges=this._avoidEdges;return g};m.prototype.getResources=
function(a,d,c){var b=this.layer,g=this.zoom;a&&a.setExtent(this.layerExtent);for(var h=b.getLayoutValue("icon-image",g),k=b.getLayoutValue("text-field",g),l=b.getLayoutValue("text-font",g),b=b.getLayoutValue("text-transform",g),g=[],n=0,y=this._features;n<y.length;n++){var p=y[n],F=p.getGeometry(a);if(F&&0!==F.length){var H=void 0;h&&(H=this._replaceKeys(h,p.values))&&d.add(H);var x=void 0,D=!1;if(k){x=this._replaceKeys(k,p.values);switch(b){case 2:x=x.toLowerCase();break;case 1:x=x.toUpperCase()}m._bidiEngine.hasBidiChar(x)&&
(D=void 0,D="rtl"===m._bidiEngine.checkContextual(x)?"IDNNN":"ICNNN",x=m._bidiEngine.bidiTransform(x,D,"VLYSN"),D=!0);p=x.length;if(0<p){var B=c[l];B||(B=c[l]=new Set);for(var t=0;t<p;t++){var q=x.charCodeAt(t);B.add(q)}}}if(H||x)p=new v,p.sprite=H,p.label=x,p.rtl=D,p.geometry=F,g.push(p)}}this._symbolFeatures=g};m.prototype.processFeatures=function(a,b){a&&a.setExtent(this.layerExtent);var g=this.layer,l=this.zoom;b=this._isLinePlacement=1===g.getLayoutValue("symbol-placement",l);a=this._avoidEdges=
g.getLayoutValue("symbol-avoid-edges",l)&&!b;var v=8*g.getLayoutValue("symbol-spacing",l),u=g.getLayoutValue("icon-image",l),p=g.getLayoutValue("text-field",l),H=this._workerTileHandler,x;u&&(this._markerLayout=new h.IconLayout(g,l,b),x=H.getSpriteItems());var D,E;if(p){var q=this._textLayout=new h.TextLayout(g,l,b);D=void 0;q.font&&q.font.length&&(this._font=D=q.font[0]);E=.5;switch(q.anchor){case 5:case 1:case 7:E=0;break;case 6:case 2:case 8:E=1}g=.5;switch(q.anchor){case 5:case 3:case 6:g=0;break;
case 7:case 4:case 8:g=1}l=.5;switch(q.justify){case 0:l=0;break;case 2:l=1}var u=24*q.letterSpacing,p=b?0:24*q.maxWidth,w=24*q.lineHeight,q=[24*q.offset[0],24*q.offset[1]];D=H.getGlyphItems(D);E=new k(D,p,w,u,q,E,g,l)}this._markerVertexStart=this._markerVertexBuffer.index;this._markerTriangleElementsStart=this._markerIndexBuffer.index;this._textVertexStart=this._textVertexBuffer.index;this._textTriangleElementsStart=this._textIndexBuffer.index;this._textTriangleElementsNum=this._markerTriangleElementsNum=
0;this._markerMap.clear();this._glyphMap.clear();this._symbolInstances=H=[];g=this._textLayout;l=1;g&&g.size&&(l=g.size/24);u=g?g.maxAngle*c.C_DEG_TO_RAD:0;p=g?8*g.size:0;w=0;for(q=this._symbolFeatures;w<q.length;w++){var Q=q[w],X=void 0;Q.sprite&&(X=x[Q.sprite]);var B=void 0,t=Q.label,K=0;if(t&&(B=E.getShaping(t,Q.rtl))&&0<B.length){for(var K=1E30,t=-1E30,I=0,O=B;I<O.length;I++)var M=O[I],K=Math.min(K,M.x),t=Math.max(t,M.x);K=(t-K+48)*l*8}t=0;for(Q=Q.geometry;t<Q.length;t++)for(I=Q[t],M=void 0,b?
(B&&0<B.length&&g&&g.size&&m._smoothVertices(I,8*g.size*(2+Math.min(2,4*Math.abs(g.offset[1])))),M=m._findAnchors(I,v,K)):M=[new d.Anchor(I[0].x,I[0].y)],O=0;O<M.length;O++){var R=M[O];0>R.x||4096<R.x||0>R.y||4096<R.y||b&&0<K&&0===g.rotationAlignment&&!m._honorsTextMaxAngle(I,R,K,u,p)||H.push(new y(B,I,X,R))}}H.sort(n);for(x=0;x<H.length;x++)this._processFeature(H[x],D,a);this._addPlacedGlyphs()};m.prototype.updateSymbols=function(){this._markerVertexStart=this._markerVertexBuffer.index;this._markerTriangleElementsStart=
this._markerIndexBuffer.index;this._textVertexStart=this._textVertexBuffer.index;this._textTriangleElementsStart=this._textIndexBuffer.index;this._textTriangleElementsNum=this._markerTriangleElementsNum=0;this._markerMap.clear();this._glyphMap.clear();for(var a=this._workerTileHandler.getGlyphItems(this._font),d=this._avoidEdges,c=0,b=this._symbolInstances;c<b.length;c++)this._processFeature(b[c],a,d);this._addPlacedGlyphs()};m.prototype._replaceKeys=function(a,d){return a.replace(/{([^{}]+)}/g,function(a,
c){return c in d?d[c]:""})};m.prototype._processFeature=function(a,d,b){var g=a.line,h=a.iconMosaicItem,k=a.shaping,n=a.anchor,m=(a=this._markerLayout)&&!!h,v=!0,y=1;m&&(y=a.size/(1/this._markerRatio)*8,v=a.optional||!h);var p=this._textLayout,D=p&&k&&0<k.length,H;H=1;var x=!0;D&&(H=p.size/24,H*=8,x=p.optional||!k||0===k.length);var F=new l.Point(0,-17),q;if(m){q=this._placementEngine.getIconPlacement(n,h,y,g,a,b);if(q.footprint.minzoom===c.C_INFINITY&&!v)return;n.minzoom>q.footprint.minzoom&&(q.footprint.minzoom=
n.minzoom)}var t;if(D&&(t=this._placementEngine.getTextPlacement(n,F,k,d,H,g,p,b))){if(t.footprint.minzoom===c.C_INFINITY&&!x)return;n.minzoom>t.footprint.minzoom&&(t.footprint.minzoom=n.minzoom)}if(!x&&!v||!v&&t&&t.footprint.minzoom!==c.C_INFINITY||!x&&q&&q.footprint.minzoom!==c.C_INFINITY)d=Math.max(q.footprint.minzoom,t.footprint.minzoom),q.footprint.minzoom=d,t.footprint.minzoom=d;t&&t.footprint.minzoom!==c.C_INFINITY&&(p.ignorePlacement||this._placementEngine.add(t),this._storePlacedGlyphs(t.shapes,
t.footprint.minzoom,this.zoom));q&&q.footprint.minzoom!==c.C_INFINITY&&(a.ignorePlacement||this._placementEngine.add(q),this._addPlacedIcons(q.shapes,q.footprint.minzoom,this.zoom,h.page))};m.prototype._addPlacedIcons=function(a,d,b,g){d=Math.max(b+c.log2(d),0);for(var h=this._markerVertexBuffer,k=this._markerIndexBuffer,l=0;l<a.length;l++){var n=a[l],m=Math.max(b+c.log2(n.minzoom),d),v=Math.min(b+c.log2(n.maxzoom),25);if(!(v<=m)){var y=n.tl,p=n.tr,D=n.bl,H=n.br,x=n.mosaicRect,q=-n.labelAngle,n=n.anchor,
t=h.index,C=x.x,F=x.y,w=C+x.width,x=F+x.height;h.add(n.x,n.y,y.x,y.y,C,F,q,m,v,d);h.add(n.x,n.y,p.x,p.y,w,F,q,m,v,d);h.add(n.x,n.y,D.x,D.y,C,x,q,m,v,d);h.add(n.x,n.y,H.x,H.y,w,x,q,m,v,d);k.add(t+0,t+1,t+2);k.add(t+1,t+2,t+3);this._markerMap.has(g)?this._markerMap.get(g)[1]+=6:this._markerMap.set(g,[this._markerTriangleElementsStart+this._markerTriangleElementsNum/3,6]);this._markerTriangleElementsNum+=6}}};m.prototype._addPlacedGlyphs=function(){var a=this,d=this._textVertexBuffer,c=this._textIndexBuffer;
this._glyphBufferDataStorage.forEach(function(b,g){for(var h=0;h<b.length;h++){var k=b[h],l=d.index;d.add(k.glyphAnchor[0],k.glyphAnchor[1],k.tl[0],k.tl[1],k.xmin,k.ymin,k.labelAngle,k.minLod,k.maxLod,k.placementLod);d.add(k.glyphAnchor[0],k.glyphAnchor[1],k.tr[0],k.tr[1],k.xmax,k.ymin,k.labelAngle,k.minLod,k.maxLod,k.placementLod);d.add(k.glyphAnchor[0],k.glyphAnchor[1],k.bl[0],k.bl[1],k.xmin,k.ymax,k.labelAngle,k.minLod,k.maxLod,k.placementLod);d.add(k.glyphAnchor[0],k.glyphAnchor[1],k.br[0],k.br[1],
k.xmax,k.ymax,k.labelAngle,k.minLod,k.maxLod,k.placementLod);c.add(l+0,l+1,l+2);c.add(l+1,l+2,l+3);a._glyphMap.has(g)?a._glyphMap.get(g)[1]+=6:a._glyphMap.set(g,[a._textTriangleElementsStart+a._textTriangleElementsNum/3,6]);a._textTriangleElementsNum+=6}});this._glyphBufferDataStorage.clear()};m.prototype._storePlacedGlyphs=function(a,d,b){d=Math.max(b+c.log2(d),0);for(var g=0;g<a.length;g++){var k=a[g],h=Math.max(b+c.log2(k.minzoom),d),l=Math.min(b+c.log2(k.maxzoom),25);if(!(l<=h)){var n=k.tl,m=
k.tr,v=k.bl,y=k.br,p=-k.labelAngle,D=k.anchor,q=k.mosaicRect;this._glyphBufferDataStorage.has(k.page)||this._glyphBufferDataStorage.set(k.page,[]);this._glyphBufferDataStorage.get(k.page).push({glyphAnchor:[D.x,D.y],tl:[n.x,n.y],tr:[m.x,m.y],bl:[v.x,v.y],br:[y.x,y.y],xmin:q.x,ymin:q.y,xmax:q.x+q.width,ymax:q.y+q.height,labelAngle:p,minLod:h,maxLod:l,placementLod:d})}}};m._findAnchors=function(a,b,g){b+=g;for(var k=0,h=a.length-1,n=0;n<h;n++)k+=l.Point.distance(a[n],a[n+1]);n=.5*(g||b);if(k<=n)return[];
g=n/k;b=k/Math.max(Math.round(k/b),1);for(var k=0,h=-b/2,m=[],v=a.length-1,n=0;n<v;n++){for(var y=a[n],p=a[n+1],D=p.x-y.x,q=p.y-y.y,H=Math.sqrt(D*D+q*q),x=void 0;h+b<k+H;){var h=h+b,F=(h-k)/H,B=c.interpolate(y.x,p.x,F),F=c.interpolate(y.y,p.y,F);void 0===x&&(x=Math.atan2(q,D));m.push(new d.Anchor(B,F,x,n,g))}k+=H}return m};m.deviation=function(a,d,c){return Math.atan2((d.x-a.x)*(c.y-d.y)-(d.y-a.y)*(c.x-d.x),(d.x-a.x)*(c.x-d.x)+(d.y-a.y)*(c.y-d.y))};m._honorsTextMaxAngle=function(a,d,c,b,g){var k=
0;c/=2;for(var h=new l.Point(d.x,d.y),n=d.segment+1;k>-c;){--n;if(0>n)return!1;k-=l.Point.distance(a[n],h);h=a[n]}k+=l.Point.distance(a[n],a[n+1]);d=[];for(var h=0,m=a.length;k<c;){var v=a[n],y=void 0;do{++n;if(n===m)return!1;y=a[n]}while(y.isEqual(v));var p=n,D=void 0;do{++p;if(p===m)return!1;D=a[p]}while(D.isEqual(y));v=this.deviation(v,y,D);d.push({deviation:v,distToAnchor:k});for(h+=v;k-d[0].distToAnchor>g;)h-=d.shift().deviation;if(Math.abs(h)>b)return!1;k+=l.Point.distance(y,D)}return!0};m._smoothVertices=
function(a,d){if(!(0>=d)){var c=a.length;if(!(3>c)){var b=[],g=0;b.push(0);for(var k=1;k<c;k++)g+=l.Point.distance(a[k],a[k-1]),b.push(g);d=Math.min(d,.2*g);g=[];g.push(a[0].x);g.push(a[0].y);var h=a[c-1].x,n=a[c-1].y,k=l.Point.sub(a[0],a[1]);k.normalize();a[0].x+=d*k.x;a[0].y+=d*k.y;k.assignSub(a[c-1],a[c-2]);k.normalize();a[c-1].x+=d*k.x;a[c-1].y+=d*k.y;for(k=1;k<c;k++)b[k]+=d;b[c-1]+=d;for(var m=.5*d,k=1;k<c-1;k++){for(var v=0,y=0,p=0,D=k-1;0<=D&&!(b[D+1]<b[k]-m);D--){var q=m+b[D+1]-b[k],x=b[D+
1]-b[D],B=b[k]-b[D]<m?1:q/x;if(1E-6>Math.abs(B))break;var t=B*B,H=B*q-.5*t*x,w=B*x/d,O=a[D+1],M=a[D].x-O.x,R=a[D].y-O.y,v=v+w/H*(O.x*B*q+.5*t*(q*M-x*O.x)-t*B*x*M/3),y=y+w/H*(O.y*B*q+.5*t*(q*R-x*O.y)-t*B*x*R/3),p=p+w}for(D=k+1;D<c&&!(b[D-1]>b[k]+m);D++){q=m-b[D-1]+b[k];x=b[D]-b[D-1];B=b[D]-b[k]<m?1:q/x;if(1E-6>Math.abs(B))break;t=B*B;H=B*q-.5*t*x;w=B*x/d;O=a[D-1];M=a[D].x-O.x;R=a[D].y-O.y;v+=w/H*(O.x*B*q+.5*t*(q*M-x*O.x)-t*B*x*M/3);y+=w/H*(O.y*B*q+.5*t*(q*R-x*O.y)-t*B*x*R/3);p+=w}g.push(v/p);g.push(y/
p)}g.push(h);g.push(n);for(D=k=0;k<c;k++)a[k].x=g[D++],a[k].y=g[D++]}}};m._bidiEngine=new g;return m}(m)})},"esri/views/vectorTiles/Placement":function(){define(["require","exports","../2d/engine/webgl/Geometry","./GeometryUtils","./Conflict"],function(w,a,b,q,m){Object.defineProperty(a,"__esModule",{value:!0});w=function(){return function(a,d,b,h,l){void 0===b&&(b=0);void 0===h&&(h=-1);void 0===l&&(l=c);this.x=a;this.y=d;this.angle=b;this.segment=h;this.minzoom=l}}();a.Anchor=w;w=function(){return function(a,
d,c){this.glyph=a;this.x=d;this.y=c}}();a.ShapedGlyph=w;var l=function(){return function(a,d,b,h,l,m,p){void 0===l&&(l=!1);void 0===m&&(m=c);void 0===p&&(p=q.C_INFINITY);this.anchor=a;this.labelAngle=d;this.glyphAngle=b;this.page=h;this.upsideDown=l;this.minzoom=m;this.maxzoom=p}}(),h=function(){return function(a,d,c,b,h,l,m,q,x,F){this.tl=a;this.tr=d;this.bl=c;this.br=b;this.mosaicRect=h;this.labelAngle=l;this.anchor=m;this.minzoom=q;this.maxzoom=x;this.page=F}}();a.PlacedSymbol=h;var d=function(){return function(a,
d){this.footprint=a;this.shapes=d}}();a.Placement=d;var c=.5;w=function(){function a(){this.mapAngle=0;this._conflictEngine=new m.ConflictEngine}a.prototype.reset=function(){this._conflictEngine.reset()};a.prototype.setAngle=function(a){this.mapAngle=a;this._conflictEngine.setAngle(a)};a.prototype.getIconPlacement=function(a,k,l,y,D,p){var g=k.width/k.pixelRatio,n=k.height/k.pixelRatio;y=D.offset[0]-g/2;var v=D.offset[1]-n/2,g=y+g,n=v+n,C=k.rect,A=y-2,u=v-2,z=A+C.width/k.pixelRatio,G=u+C.height/k.pixelRatio;
k=new b.Point(A,u);var w=new b.Point(z,G),A=new b.Point(A,G),z=new b.Point(z,u),G=D.rotate*q.C_DEG_TO_RAD,u=1===D.rotationAlignment;0<=a.segment&&!u&&(G+=a.angle);if(0!==G){var N=Math.cos(G),E=Math.sin(G);k.rotate(N,E);w.rotate(N,E);A.rotate(N,E);z.rotate(N,E)}N=8*D.padding;E=new b.Point(a.x,a.y);a=new m.Footprint(this.mapAngle,N,u);a.addBox(E,new m.Box(y,v,g,n),l,G,c,q.C_INFINITY);l=new h(k,z,A,w,C,0,E,c,q.C_INFINITY,0);l=new d(a,[l]);y=c;D.allowOverlap||(y=this._conflictEngine.getMinZoom(l.footprint,
y,p,u));a.minzoom=y;return l};a.prototype.getTextPlacement=function(a,k,v,y,D,p,H,x){for(var g=new b.Point(a.x,a.y),n=H.rotate*q.C_DEG_TO_RAD,A=0===H.rotationAlignment,u=H.keepUpright,z=c,w=!A,P=w?0:a.angle,N=0<=a.segment&&A,E=new m.Footprint(this.mapAngle,8*H.padding,w),U=[],S=!N,Q=Number.POSITIVE_INFINITY,X=Number.NEGATIVE_INFINITY,B=Q,t=X,K=N?u:A&&u,I=[],O,M=0;M<v.length;M++){var R=v[M],V=y[R.glyph];if(V&&!V.rect.isEmpty){var ja=V.rect,ea=V.metrics,ca=V.page;S&&(O&&O!==R.y&&(E.addBox(g,new m.Box(Q,
B,X,t),D,n,c,q.C_INFINITY),Q=Number.POSITIVE_INFINITY,X=Number.NEGATIVE_INFINITY,B=Q,t=X),O=R.y);var fa=[];if(N){if(V=(k.x+R.x+ea.left-4+.5*V.metrics.width)*D,z=this._placeGlyph(a,z,V,p,a.segment,1,ca,fa),u&&(z=this._placeGlyph(a,z,V,p,a.segment,-1,ca,fa)),2<=z)break}else fa.push(new l(g,P,P,ca)),A&&u&&fa.push(new l(g,P+q.C_PI,P+q.C_PI,ca,!0));for(var ca=R.x+k.x+ea.left,R=R.y+k.y-ea.top,V=ca+ea.width,ea=R+ea.height,da=new b.Point(ca-4,R-4),Y=new b.Point(da.x+ja.width,da.y+ja.height),ga=new b.Point(da.x,
Y.y),W=new b.Point(Y.x,da.y),ha=0;ha<fa.length;ha++){var Z=fa[ha],ka=da.clone(),la=ga.clone(),ma=W.clone(),na=Y.clone(),oa=R,ba=ea,J=Z.glyphAngle+n;if(0!==J){var T=Math.cos(J),f=Math.sin(J);ka.rotate(T,f);na.rotate(T,f);la.rotate(T,f);ma.rotate(T,f)}U.push(new h(ka,ma,la,na,ja,Z.labelAngle,Z.anchor,Z.minzoom,Z.maxzoom,Z.page));if(!K||this._legible(Z.labelAngle))S?(ca<Q&&(Q=ca),oa<B&&(B=oa),V>X&&(X=V),ba>t&&(t=ba)):2>Z.minzoom&&E.addBox(Z.anchor,new m.Box(ca,oa,V,ba),D,J,Z.minzoom,Z.maxzoom);I.push(Z)}}}if(2<=
z)return null;S&&E.addBox(g,new m.Box(Q,B,X,t),D,n,c,q.C_INFINITY);a=new d(E,U);H.allowOverlap||(z=this._conflictEngine.getMinZoom(a.footprint,z,x,w));E.minzoom=z;return a};a.prototype.add=function(a){this._conflictEngine.add(a.footprint)};a.prototype._legible=function(a){a=q.radToByte(a);return 65>a||193<=a};a.prototype._placeGlyph=function(a,d,c,k,h,m,H,x){var g=0>m?q.positiveMod(a.angle+q.C_PI,q.C_2PI):a.angle,n=this._legible(g),v=0;0>c&&(m*=-1,c*=-1,v=q.C_PI);0<m&&++h;a=new b.Point(a.x,a.y);var y=
k[h],p=q.C_INFINITY;if(k.length<=h)return p;for(;;){var D=y.x-a.x,w=y.y-a.y,N=Math.sqrt(D*D+w*w),E=Math.max(c/N,d),D=q.positiveMod(Math.atan2(w/N,D/N)+v,q.C_2PI);x.push(new l(a,g,D,H,n,E,p));if(E<=d)return E;a=y.clone();do{h+=m;if(k.length<=h||0>h)return E;y=k[h]}while(a.isEqual(y));p=y.x-a.x;D=y.y-a.y;w=Math.sqrt(p*p+D*D);p*=N/w;D*=N/w;a.x-=p;a.y-=D;p=E}};return a}();a.PlacementEngine=w})},"esri/views/vectorTiles/Conflict":function(){define(["require","exports","../2d/engine/webgl/Geometry","./GeometryUtils"],
function(w,a,b,q){Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(a,c,b,g){this.left=a;this.top=c;this.right=b;this.bottom=g}a.prototype.clone=function(){return new a(this.left,this.top,this.right,this.bottom)};a.prototype.move=function(a,c){this.left+=a;this.top+=c;this.right+=a;this.bottom+=c};a.prototype.rotate=function(a,c){var d=this.left,b=this.right,h=this.top,l=this.bottom,m=d*a-h*c,D=d*c+h*a,p=b*a-h*c,h=b*c+h*a,q=d*a-l*c,d=d*c+l*a,x=b*a-l*c;a=b*c+l*a;this.left=Math.min(m,
p,q,x);this.top=Math.min(D,h,d,a);this.right=Math.max(m,p,q,x);this.bottom=Math.max(D,h,d,a)};a.overlaps=function(a,b){return a.right>b.left&&a.left<b.right&&a.bottom>b.top&&a.top<b.bottom};return a}();a.Box=w;var m=function(){function a(a,b,k,g){this.anchor=a;this.corners=b;this.minzoom=k;this.maxzoom=g}a.prototype.left=function(){return this.corners[0].x};a.prototype.right=function(){return this.corners[2].x};a.prototype.top=function(){return this.corners[1].y};a.prototype.bottom=function(){return this.corners[3].y};
return a}();a.Obstacle=m;w=function(){function a(a,b,k){this.obstacles=[];this.mapAngle=a;this.padding=b;this.isScreenAligned=k;this.minzoom=l}a.prototype.addBox=function(a,c,k,g,h,l){var d=c.left*k-this.padding,n=c.top*k-this.padding,v=c.right*k+this.padding;c=c.bottom*k+this.padding;d=[new b.Point(d,n),new b.Point(v,n),new b.Point(v,c),new b.Point(d,c)];0!==this.mapAngle&&(n=Math.cos(this.mapAngle),v=Math.sin(this.mapAngle),a=a.clone(),a.rotate(n,v));this.isScreenAligned||(g+=this.mapAngle);if(0!==
g){n=Math.cos(g);v=Math.sin(g);d[0].rotate(n,v);d[1].rotate(n,v);d[2].rotate(n,v);d[3].rotate(n,v);g=0;for(n=1;4>n;n++)d[n].x<d[g].x?g=n:d[n].x===d[g].x&&d[n].y<d[g].y&&(g=n);if(g){v=[];for(n=0;4>n;n++)v.push(d[(n+g)%4]);d=v}}this.obstacles.push(new m(a,d,h,l))};return a}();a.Footprint=w;var l=.5;w=function(){function a(){this._grid=[]}a.prototype.setAngle=function(a){this._angle=a;this._c=Math.cos(a);this._s=Math.sin(a)};a.prototype.reset=function(){this._angle=this._s=0;this._c=1;this._grid=[]};
a.prototype.add=function(d){var b=this._grid,k=0;for(d=d.obstacles;k<d.length;k++)for(var g=d[k],h=g.anchor,l=a._gridClamp(Math.min(g.left()+h.x,h.x)),m=a._gridClamp(Math.max(g.right()+h.x,h.x)),q=a._gridClamp(Math.min(g.top()+h.y,h.y)),h=a._gridClamp(Math.max(g.bottom()+h.y,h.y));q<=h;q++)for(var p=l;p<=m;p++){var w=b[16*q+p];w||(w=b[16*q+p]=[]);w.push(g)}};a.prototype.getMinZoom=function(d,b,k,g){if(0===d.obstacles.length)return q.C_INFINITY;k=this._grid;g=0;for(d=d.obstacles;g<d.length;g++)for(var c=
d[g],h=c.anchor,l=a._gridClamp(Math.min(c.left()+h.x,h.x)),m=a._gridClamp(Math.max(c.right()+h.x,h.x)),p=a._gridClamp(Math.min(c.top()+h.y,h.y)),h=a._gridClamp(Math.max(c.bottom()+h.y,h.y));p<=h;p++)for(var w=l;w<=m;w++){var x=k[16*p+w];if(x)for(var F=0;F<x.length;F++){var C=x[F];if(!(c.minzoom>=C.maxzoom||C.minzoom>=c.maxzoom)&&(b=a._calcPlacementZoom(c,C,b),2<=b))return q.C_INFINITY}}return 2>b?b:q.C_INFINITY};a._gridClamp=function(a){return q.clamp(a>>9,-7,8)};a._calcPlacementZoom=function(d,b,
k){var c=b.anchor.x-d.anchor.x;if(0===c&&(d.right()<b.left()||b.right()<d.left()))return k;var h=b.anchor.y-d.anchor.y;if(0===h&&(d.bottom()<b.top()||b.bottom()<d.top()))return k;var l=q.C_INFINITY;if(0!==c){var m=(0<c?d.right()-b.left():d.left()-b.right())/c;m<l&&(l=m);c=0<c?a._calcExtZoomX(d,b,m):a._calcExtZoomX(b,d,m);c<l&&(l=c)}0!==h&&(c=(0<h?d.bottom()-b.top():d.top()-b.bottom())/h,c<l&&(l=c),h=0<h?a._calcExtZoomY(d,b,c):a._calcExtZoomY(b,d,c),h<l&&(l=h));if(l<d.minzoom||l<b.minzoom)return k;
l=Math.min(l,d.maxzoom,b.maxzoom);l<k&&(l=k);return l};a._calcExtZoomX=function(a,b,k){var d,c,h;if(a.anchor.y+a.corners[2].y/k<b.anchor.y+b.corners[0].y/k){d=a.corners[2].x-a.corners[3].x;h=a.corners[2].y-a.corners[3].y;var l=b.corners[1].x-b.corners[0].x;c=b.corners[1].y-b.corners[0].y;0<=d*c-h*l?a.anchor.y+a.corners[3].y/k<b.anchor.y+b.corners[0].y/k?(k=a.corners[3],d=b.corners[0],c=b.corners[1],h=1):(k=b.corners[0],d=a.corners[3],c=a.corners[2],h=-1):a.anchor.y+a.corners[2].y/k>b.anchor.y+b.corners[1].y/
k?(k=a.corners[2],d=b.corners[0],c=b.corners[1],h=1):(k=b.corners[1],d=a.corners[3],c=a.corners[2],h=-1)}else d=a.corners[2].x-a.corners[1].x,h=a.corners[2].y-a.corners[1].y,l=b.corners[3].x-b.corners[0].x,c=b.corners[3].y-b.corners[0].y,0>d*c-h*l?a.anchor.y+a.corners[1].y/k>b.anchor.y+b.corners[0].y/k?(k=a.corners[1],d=b.corners[0],c=b.corners[3],h=1):(k=b.corners[0],d=a.corners[1],c=a.corners[2],h=-1):a.anchor.y+a.corners[2].y/k<b.anchor.y+b.corners[3].y/k?(k=a.corners[2],d=b.corners[0],c=b.corners[3],
h=1):(k=b.corners[3],d=a.corners[1],c=a.corners[2],h=-1);l=c.x-d.x;c=c.y-d.y;return h*((k.y-d.y)*l-(k.x-d.x)*c)/((a.anchor.x-b.anchor.x)*c-(a.anchor.y-b.anchor.y)*l)};a._calcExtZoomY=function(a,b,k){var d,c,h;if(a.anchor.x+a.corners[3].x/k<b.anchor.x+b.corners[1].x/k){d=a.corners[3].x-a.corners[2].x;h=a.corners[3].y-a.corners[2].y;var l=b.corners[0].x-b.corners[1].x;c=b.corners[0].y-b.corners[1].y;0>d*c-h*l?a.anchor.x+a.corners[2].x/k<b.anchor.x+b.corners[1].x/k?(k=a.corners[2],d=b.corners[1],c=b.corners[0],
h=1):(k=b.corners[1],d=a.corners[2],c=a.corners[3],h=-1):a.anchor.x+a.corners[3].x/k>b.anchor.x+b.corners[0].x/k?(k=a.corners[3],d=b.corners[1],c=b.corners[0],h=1):(k=b.corners[0],d=a.corners[2],c=a.corners[3],h=-1)}else d=a.corners[3].x-a.corners[0].x,h=a.corners[3].y-a.corners[0].y,l=b.corners[2].x-b.corners[1].x,c=b.corners[2].y-b.corners[1].y,0<d*c-h*l?a.anchor.x+a.corners[0].x/k>b.anchor.x+b.corners[1].x/k?(k=a.corners[0],d=b.corners[1],c=b.corners[2],h=1):(k=b.corners[1],d=a.corners[0],c=a.corners[3],
h=-1):a.anchor.x+a.corners[3].x/k<b.anchor.x+b.corners[2].x/k?(k=a.corners[3],d=b.corners[1],c=b.corners[2],h=1):(k=b.corners[2],d=a.corners[0],c=a.corners[3],h=-1);l=c.x-d.x;c=c.y-d.y;return h*((k.y-d.y)*l-(k.x-d.x)*c)/((a.anchor.x-b.anchor.x)*c-(a.anchor.y-b.anchor.y)*l)};return a}();a.ConflictEngine=w})},"esri/views/vectorTiles/TextShaping":function(){define(["require","exports","./Placement"],function(w,a,b){return function(){function a(a,b,h,d,c,k,g,n){this._glyphItems=a;this._maxWidth=b;this._lineHeight=
h;this._letterSpacing=d;this._offset=c;this._hAnchor=k;this._vAnchor=g;this._justify=n}a.prototype.getShaping=function(a,l){for(var h=this._glyphItems,d=this._letterSpacing,c=this._offset[0],k=this._offset[1],g=[],n=a.length,m=0;m<n;m++){var y=a.charCodeAt(m),q=h[y];q&&(g.push(new b.ShapedGlyph(y,c,k)),c+=q.metrics.advance+d)}if(0<g.length){y=this._maxWidth;a=this._lineHeight;d=this._justify;c=g.length;n=k=h=0;if(0!==y)for(var p=q=0,m=0;m<c;m++){var w=g[m];w.x-=p;w.y=l?w.y-a*h:w.y+a*h;if(w.x>y&&0<
q){for(var x=g[q+1].x,n=Math.max(x,n),F=q+1;F<=m;F++)g[F].y=l?g[F].y-a:g[F].y+a,g[F].x-=x;d&&this._applyJustification(g,k,q-1);k=q+1;q=0;p+=x;h++}32===w.glyph&&(q=m)}m=g[c-1];n=Math.max(n,m.x+this._glyphItems[m.glyph].metrics.advance);d&&this._applyJustification(g,k,c-1);m=(d-this._hAnchor)*n;d=(-this._vAnchor*(h+1)+.5)*a;l&&h&&(d+=h*a);for(l=0;l<g.length;l++)a=g[l],a.x+=m,a.y+=d}return g};a.prototype._applyJustification=function(a,b,h){for(var d=a[h],d=(d.x+this._glyphItems[d.glyph].metrics.advance)*
this._justify;b<=h;b++)a[b].x-=d};return a}()})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(w,a,b){function q(a,b,c,f,g){var e=a;void 0===b&&(b=g.defInFormat);void 0===c&&(c=g.defOutFormat);void 0===f&&(f=g.defSwap);if(b!==c){var k,h=b.substring(0,1);k=b.substring(1,4);var n=c.substring(0,1),p=c.substring(1,4);"C"===k.charAt(0)&&(k=m(e),k="ltr"===k||"rtl"===k?k.toUpperCase():"L"===b.charAt(2)?"LTR":"RTL",b=h+k);"C"===p.charAt(0)&&
(k=m(e),"rtl"===k?p="RTL":"ltr"===k?(e=e.split(""),e.reverse(),k=m(e.join("")),p=k.toUpperCase()):p="L"===c.charAt(2)?"LTR":"RTL",c=n+p)}if(b===c)return a;n=b.substring(0,1);e=b.substring(1,4);h=c.substring(0,1);p=c.substring(1,4);g.inFormat=b;g.outFormat=c;g.swap=f;if("L"===n&&"VLTR"===c){if("LTR"===e)return g.dir=G,l(a,g);if("RTL"===e)return g.dir=P,l(a,g)}if("V"===n&&"V"===h)return g.dir="RTL"===e?P:G,d(a,g);if("L"===n&&"VRTL"===c)return g.dir="LTR"===e?G:P,a=l(a,g),d(a);if("VLTR"===b&&"LLTR"===
c)return g.dir=G,l(a,g);if("V"===n&&"L"===h&&e!==p)return a=d(a),"RTL"===e?q(a,"LLTR","VLTR",f,g):q(a,"LRTL","VRTL",f,g);if("VRTL"===b&&"LRTL"===c)return q(a,"LRTL","VRTL",f,g);if("L"===n&&"L"===h)return b=g.swap,g.swap=b.substr(0,1)+"N","RTL"===e?(g.dir=P,a=l(a,g),g.swap="N"+b.substr(1,2),g.dir=G,a=l(a,g)):(g.dir=G,a=l(a,g),g.swap="N"+b.substr(1,2),a=q(a,"VLTR","LRTL",g.swap,g)),a}function m(a){return(a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(a))?"z">=a[0]?
"ltr":"rtl":""}function l(a,b){a=a.split("");var d=[];h(a,d,b);if(0!==b.hiLevel&&b.swap.substr(0,1)!==b.swap.substr(1,2))for(var c=0;c<a.length;c++)if(1===d[c]){var f=c,e;b:{e=a[c];for(var k=void 0,l=0,n=U.length-1;l<=n;)if(k=Math.floor((l+n)/2),e<U[k][0])n=k-1;else if(e>U[k][0])l=k+1;else{e=U[k][1];break b}}a[f]=e}g(2,a,d,b);g(1,a,d,b);C=d;return a.join("")}function h(a,b,d){var c=a.length,f=d.dir?ca:ea,g=null,e=null,k=null,g=0,e=e=null,h=-1,l=e=null,m=[],p=[];d.hiLevel=d.dir;d.lastArabic=!1;d.hasUbatAl=
!1;d.hasUbatB=!1;d.hasUbatS=!1;for(e=0;e<c;e++){var l=e,k=a[e].charCodeAt(0),v=qa[k>>8];m[l]=v<ba?v:ra[v-ba][k&255]}for(l=0;l<c;l++){p[l]=e=n(a,m,p,l,d);g=f[g][e];e=g&240;g&=15;b[l]=k=f[g][u];if(0<e){if(16===e)for(e=h;e<l;e++)b[e]=1;h=-1}if(e=f[g][z])-1===h&&(h=l);else if(-1<h){for(e=h;e<l;e++)b[e]=k;h=-1}m[l]===ha&&(b[l]=0);d.hiLevel|=k}if(d.hasUbatS)for(a=0;a<c;a++)if(m[a]===Z)for(b[a]=d.dir,f=a-1;0<=f;f--)if(m[f]===la)b[f]=d.dir;else break}function d(a,b){a=a.split("");if(b){var d=[];h(a,d,b);
C=d}a.reverse();x.reverse();return a.join("")}function c(a){for(var b=0;b<V.length;b++)if(a>=V[b]&&a<=ja[b])return!0;return!1}function k(a,b,d,e){for(;b*d<e&&y(a[b]);)b+=d;return b*d<e&&c(a[b])?!0:!1}function g(a,b,d,c){if(!(c.hiLevel<a))if(1!==a||c.dir!==P||c.hasUbatB){c=b.length;for(var e=0,f,g,k;e<c;){if(d[e]>=a){for(f=e+1;f<c&&d[f]>=a;)f++;for(g=f-1;e<g;e++,g--)k=b[e],b[e]=b[g],b[g]=k,k=x[e],x[e]=x[g],x[g]=k;e=f}e++}}else b.reverse(),x.reverse()}function n(a,b,d,c,e){return{UBAT_L:function(){e.lastArabic=
!1;return fa},UBAT_R:function(){e.lastArabic=!1;return da},UBAT_ON:function(){return W},UBAT_AN:function(){return ga},UBAT_EN:function(){return e.lastArabic?ga:Y},UBAT_AL:function(){e.lastArabic=!0;e.hasUbatAl=!0;return da},UBAT_WS:function(){return W},UBAT_CS:function(){var a,f;if(1>c||c+1>=b.length||(a=d[c-1])!==Y&&a!==ga||(f=b[c+1])!==Y&&f!==ga)return W;e.lastArabic&&(f=ga);return f===a?f:W},UBAT_ES:function(){return(0<c?d[c-1]:ha)===Y&&c+1<b.length&&b[c+1]===Y?Y:W},UBAT_ET:function(){if(0<c&&
d[c-1]===Y)return Y;if(e.lastArabic)return W;for(var a=c+1,f=b.length;a<f&&b[a]===ma;)a++;return a<f&&b[a]===Y?Y:W},UBAT_NSM:function(){if("VLTR"===e.inFormat){for(var f=b.length,g=c+1;g<f&&b[g]===na;)g++;if(g<f&&(f=a[c],g=b[g],(1425<=f&&2303>=f||64286===f)&&(g===da||g===ka)))return da}return 1>c||b[c-1]===ha?W:d[c-1]},UBAT_B:function(){e.lastArabic=!0;e.hasUbatB=!0;return e.dir},UBAT_S:function(){e.hasUbatS=!0;return W},UBAT_LRE:function(){e.lastArabic=!1;return W},UBAT_RLE:function(){e.lastArabic=
!1;return W},UBAT_LRO:function(){e.lastArabic=!1;return W},UBAT_RLO:function(){e.lastArabic=!1;return W},UBAT_PDF:function(){e.lastArabic=!1;return W},UBAT_BN:function(){return W}}[oa[b[c]]]()}function v(a,b){for(var d=0;d<B.length;d++)if(a===B[d])return b[d];return a}function y(a){return"\u064b"<=a&&"\u0655">=a?!0:!1}function D(a){if("L"===a)return"LTR";if("R"===a)return"RTL";if("C"===a)return"CLR";if("D"===a)return"CRL"}function p(a,b){for(var d=0;d<S.length;d++)if(a===S[d])return b[d];return a}
function H(a,b,d,c){for(var e=0;e<a.length;e++)if(a[e]>b||!d&&a[e]===b)a[e]+=c}w.getObject("string",!0,dojox);w=a("dojox.string.BidiEngine",b,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(a,b,d){this.sourceToTarget=[];this.targetToSource=[];if(!a)return"";var e=this.sourceToTarget,f=this.targetToSource,g=a.length;x=[];C=[];for(var h=0;h<g;h++)e[h]=h,f[h]=h,x[h]=h;if(!this.checkParameters(b,d))return a;b=this.inputFormat;d=this.outputFormat;
var e=a,e=A,h=D(b.charAt(1)),f=D(d.charAt(1)),l="I"===b.charAt(0)?"L":b.charAt(0),g="I"===d.charAt(0)?"L":d.charAt(0),h=l+h,f=g+f,g=b.charAt(2)+d.charAt(2);e.defInFormat=h;e.defOutFormat=f;e.defSwap=g;a=q(a,h,f,g,e);e=!1;if("R"===d.charAt(1))e=!0;else if("C"===d.charAt(1)||"D"===d.charAt(1))e=this.checkContextual(a);f=this.sourceToTarget=x;g=Array(f.length);for(h=0;h<f.length;h++)g[f[h]]=h;F=this.targetToSource=g;if(b.charAt(3)===d.charAt(3))e=a;else if("S"===d.charAt(3))if(b=e,d=!0,0===a.length)e=
void 0;else{void 0===b&&(b=!0);void 0===d&&(d=!0);a=String(a);a=a.split("");var n=0,f=1,e=a.length;b||(n=a.length-1,f=-1,e=1);for(var g=e,h=d,m=0,e=[],l=0;n*f<g;n+=f)if(c(a[n])||y(a[n])){var r;if(r="\u0644"===a[n])b:{for(var u=a,w=n+f,z=f,E=g;w*z<E&&y(u[w]);)w+=z;r=" ";if(w*z<E)for(r=u[w],u=0;u<S.length;u++)if(S[u]===r){r=!0;break b}r=!1}if(r){a[n]=0===m?p(a[n+f],Q):p(a[n+f],X);n+=f;m=a;r=n;u=f;for(w=g;r*u<w&&y(m[r]);)r+=u;r*u<w&&(m[r]=" ");h&&(e[l]=n,l++);m=0}else{r=a[n];if(1===m){u=n;if(k(a,n+f,
f,g))b:for(w=a[n],z=0;z<B.length;z++){if(w===B[z]){w=I[z];break b}}else w=v(a[n],K);a[u]=w}else!0===k(a,n+f,f,g)?a[n]=v(a[n],O):a[n]=v(a[n],t);y(r)||(m=1);b:{for(u=0;u<M.length;u++)if(M[u]===r){r=!0;break b}r=!1}!0===r&&(m=0)}}else m=0;f="";for(g=0;g<a.length;g++){if(h=d){b:{for(h=0;h<e.length;h++)if(e[h]===g)break b;h=-1}h=-1<h}h?(H(F,g,!b,-1),x.splice(g,1)):f+=a[g]}e=f}else if(b=a,d=e,a=!0,0===b.length)e=void 0;else for(void 0===a&&(a=!0),void 0===d&&(d=!0),b=String(b),e="",f=[],f=b.split(""),g=
0;g<b.length;g++)h=!1,"\ufe70"<=f[g]&&"\ufeff">f[g]?(l=b.charCodeAt(g),"\ufef5"<=f[g]&&"\ufefc">=f[g]?(d?(0<g&&a&&" "===f[g-1]?e=e.substring(0,e.length-1)+"\u0644":(e+="\u0644",h=!0),e+=S[(l-65269)/2]):(e+=S[(l-65269)/2],e+="\u0644",g+1<b.length&&a&&" "===f[g+1]?g++:h=!0),h&&(H(F,g,!0,1),x.splice(g,0,x[g]))):e+=R[l-65136]):e+=f[g];this.sourceToTarget=x;this.targetToSource=F;this.levels=C;return e},_inputFormatSetter:function(a){if(!N.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");
this.inputFormat=a},_outputFormatSetter:function(a){if(!N.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=a},checkParameters:function(a,b){a?this.set("inputFormat",a):a=this.inputFormat;b?this.set("outputFormat",b):b=this.outputFormat;return a===b?!1:!0},checkContextual:function(a){a=m(a);if("ltr"!==a&&"rtl"!==a){try{a=document.dir.toLowerCase()}catch(sa){}"ltr"!==a&&"rtl"!==a&&(a="ltr")}return a},hasBidiChar:function(a){return E.test(a)}});var x=
[],F=[],C=[],A={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},u=5,z=6,G=0,P=1,N=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,E=/[\u0591-\u06ff\ufb1d-\ufefc]/,U=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],
["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],S=["\u0622","\u0623","\u0625","\u0627"],Q=["\ufef5","\ufef7","\ufef9","\ufefb"],X=["\ufef6","\ufef8","\ufefa","\ufefc"],B="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),
t="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),K="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),
I="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),O="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),
M="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),R="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
V=["\u0621","\u0641"],ja=["\u063a","\u064a"],ea=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],ca=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],fa=0,da=1,Y=2,ga=3,W=4,ha=5,Z=6,ka=7,la=8,ma=11,na=12,oa="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),ba=100;a=fa;b=da;var J=Y,T=ga,f=W,ia=ha,pa=Z,e=ka,aa=la,L=
ma,r=na,qa=[ba+0,a,a,a,a,ba+1,ba+2,ba+3,b,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,ba+4,f,f,f,a,f,a,f,a,f,f,f,a,a,f,f,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,a,a,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,a,a,f,f,a,a,f,f,a,a,f,f,f,f,f,f,f,f,f,f,f,f,
f,f,f,f,f,f,f,f,f,f,f,a,a,a,ba+5,e,e,ba+6,ba+7],ra=[[18,18,18,18,18,18,18,18,18,pa,ia,pa,aa,ia,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ia,ia,ia,pa,aa,f,f,L,L,L,f,f,f,f,f,10,9,10,9,9,J,J,J,J,J,J,J,J,J,J,9,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,18,18,18,18,18,18,ia,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,f,L,L,L,L,f,f,f,f,a,f,f,18,f,f,L,L,J,J,f,a,f,f,f,J,a,f,f,f,
f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,a,a,a,a,a,a,a,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,a,f,f,f,f,f,f,f,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,
r,r,r,r,r,r,b,r,b,r,r,b,r,r,b,r,f,f,f,f,f,f,f,f,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,f,f,f,f,f,b,b,b,b,b,f,f,f,f,f,f,f,f,f,f,f],[T,T,T,T,f,f,f,f,e,L,L,e,9,e,f,f,r,r,r,r,r,r,r,r,r,r,r,e,f,f,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,T,T,T,T,T,T,T,T,T,T,L,T,T,e,e,e,r,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,
e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,r,r,r,r,r,r,r,T,f,r,r,r,r,r,r,e,e,r,r,f,r,r,r,r,e,e,J,J,J,J,J,J,J,J,J,J,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,f,e,e,r,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,f,f,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,r,r,r,r,r,r,
r,r,r,r,r,e,f,f,f,f,f,f,f,f,f,f,f,f,f,f,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,r,r,r,r,r,r,r,r,r,b,b,f,f,f,f,b,f,f,f,f,f],[aa,aa,aa,aa,aa,aa,aa,aa,aa,aa,aa,18,18,18,a,b,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,aa,ia,13,14,15,16,17,9,L,L,L,L,L,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,9,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,aa,18,18,18,18,18,f,f,f,f,f,18,18,18,18,18,18,J,a,f,f,J,J,J,J,J,J,10,10,f,f,f,a,J,J,J,J,J,J,J,J,J,J,10,10,f,f,f,f,a,a,a,
a,a,a,a,a,a,a,a,a,a,f,f,f,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,f,a,a,a,a,a,f,f,f,f,f,b,r,b,b,b,b,b,b,b,b,b,b,10,b,b,b,b,b,b,b,b,b,b,b,b,b,f,b,b,b,b,b,f,b,f,b,b,f,b,b,f,b,b,b,b,b,b,b,b,b,b,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,
e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,r,r,r,r,r,r,r,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,9,f,9,f,f,9,f,f,f,f,f,f,f,f,f,L,f,f,10,10,f,f,f,f,f,L,L,f,f,f,f,f,e,e,e,e,e,f,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,
e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,f,f,18],[f,f,f,L,L,L,f,f,f,f,f,10,9,10,9,9,J,J,J,J,J,J,J,J,J,J,9,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,a,a,a,a,a,a,f,f,a,a,a,a,a,a,f,f,a,a,a,a,a,a,f,f,a,a,a,f,f,f,L,L,f,f,f,L,L,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f]];return w})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(w,a,b,q){return w("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;return b[a]?
b[a]:b[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,b){return"function"===typeof this[b.g]?this[b.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,b){if("object"===typeof a){for(var h in a)a.hasOwnProperty(h)&&"_watchCallbacks"!=h&&this.set(h,a[h]);return this}h=this._getAttrNames(a);var d=this._get(a,h);h=this[h.s];var c;"function"===typeof h?c=h.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=b;
if(this._watchCallbacks){var k=this;q(c,function(){k._watchCallbacks(a,d,b)})}return this},_changeAttrValue:function(a,b){var h=this.get(a);this[a]=b;this._watchCallbacks&&this._watchCallbacks(a,h,b);return this},watch:function(a,l){var h=this._watchCallbacks;if(!h)var d=this,h=this._watchCallbacks=function(a,b,c,l){var g=function(g){if(g){g=g.slice();for(var k=0,h=g.length;k<h;k++)g[k].call(d,a,b,c)}};g(h["_"+a]);l||g(h["*"])};l||"function"!==typeof a?a="_"+a:(l=a,a="*");var c=h[a];"object"!==typeof c&&
(c=h[a]=[]);c.push(l);a={};a.unwatch=a.remove=function(){var a=b.indexOf(c,l);-1<a&&c.splice(a,1)};return a}})})},"esri/views/2d/engine/webgl/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(w,a,b,q){Object.defineProperty(a,"__esModule",{value:!0});var m=function(){return function(a,b,c){this.ratio=a;this.x=b;this.y=c}}();w=function(){function a(a,b,k,g,h){void 0===g&&(g=8);void 0===h&&(h=8);this.lines=[];this.starts=[];this.pixelRatio=g;this.pixelMargin=
h;this.tileSize=512*g;this.dz=a;this.yPos=b;this.xPos=k}a.prototype.setExtent=function(a){this.finalRatio=this.tileSize/a*(1<<this.dz);var b=this.pixelRatio*this.pixelMargin,b=b/this.finalRatio;a>>=this.dz;b>a&&(b=a);this.margin=b;this.xmin=a*this.xPos-b;this.ymin=a*this.yPos-b;this.xmax=this.xmin+a+2*b;this.ymax=this.ymin+a+2*b};a.prototype.reset=function(a){this.type=a;this.lines=[];this.starts=[];this.line=null;this.start=0};a.prototype.moveTo=function(a,c){this._pushLine();this._prevIsIn=this._isIn(a,
c);this._moveTo(a,c,this._prevIsIn);this._prevPt=new b.Point(a,c);this._firstPt=new b.Point(a,c);this._dist=0};a.prototype.lineTo=function(a,c){var d=this._isIn(a,c),g=new b.Point(a,c),h=b.Point.distance(this._prevPt,g),l,y,q;if(d)this._prevIsIn?this._lineTo(a,c,!0):(l=this._prevPt,y=g,a=this._intersect(y,l),this.start=this._dist+h*(1-this._r),this._lineTo(a.x,a.y,!0),this._lineTo(y.x,y.y,!0));else if(this._prevIsIn)y=this._prevPt,l=g,a=this._intersect(y,l),this._lineTo(a.x,a.y,!0),this._lineTo(l.x,
l.y,!1);else{var p=this._prevPt;if(!(p.x<=this.xmin&&g.x<=this.xmin||p.x>=this.xmax&&g.x>=this.xmax||p.y<=this.ymin&&g.y<=this.ymin||p.y>=this.ymax&&g.y>=this.ymax)){a=[];if(p.x<this.xmin&&g.x>this.xmin||p.x>this.xmin&&g.x<this.xmin)c=(this.xmin-p.x)/(g.x-p.x),q=p.y+c*(g.y-p.y),q<=this.ymin?y=!1:q>=this.ymax?y=!0:a.push(new m(c,this.xmin,q));if(p.x<this.xmax&&g.x>this.xmax||p.x>this.xmax&&g.x<this.xmax)c=(this.xmax-p.x)/(g.x-p.x),q=p.y+c*(g.y-p.y),q<=this.ymin?y=!1:q>=this.ymax?y=!0:a.push(new m(c,
this.xmax,q));if(p.y<this.ymin&&g.y>this.ymin||p.y>this.ymin&&g.y<this.ymin)c=(this.ymin-p.y)/(g.y-p.y),q=p.x+c*(g.x-p.x),q<=this.xmin?l=!1:q>=this.xmax?l=!0:a.push(new m(c,q,this.ymin));if(p.y<this.ymax&&g.y>this.ymax||p.y>this.ymax&&g.y<this.ymax)c=(this.ymax-p.y)/(g.y-p.y),q=p.x+c*(g.x-p.x),q<=this.xmin?l=!1:q>=this.xmax?l=!0:a.push(new m(c,q,this.ymax));if(0===a.length)l?y?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):y?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,
this.ymin,!0);else if(1<a.length&&a[0].ratio>a[1].ratio)this.start=this._dist+h*a[1].ratio,this._lineTo(a[1].x,a[1].y,!0),this._lineTo(a[0].x,a[0].y,!0);else for(this.start=this._dist+h*a[0].ratio,l=0;l<a.length;l++)this._lineTo(a[l].x,a[l].y,!0)}this._lineTo(g.x,g.y,!1)}this._dist+=h;this._prevIsIn=d;this._prevPt=g};a.prototype.close=function(){var a,b;0<this.line.length&&(a=this._firstPt,b=this._prevPt,a.x===b.x&&a.y===b.y||this.lineTo(a.x,a.y),a=this.line,b=a.length,4<=b&&(a[0].x===a[1].x&&a[0].x===
a[b-2].x||a[0].y===a[1].y&&a[0].y===a[b-2].y)&&(a.pop(),a[0].x=a[b-2].x,a[0].y=a[b-2].y))};a.prototype.result=function(){this._pushLine();if(0===this.lines.length)return null;3===this.type&&l.simplify(this.margin*this.finalRatio,this.lines);return this.lines};a.prototype.resultWithStarts=function(){if(2!==this.type)throw Error("Only valid for lines");this._pushLine();var a=this.lines,b=a.length;if(0===b)return null;for(var k=[],g=0;g<b;g++)k.push({line:a[g],start:this.starts[g]||0});return k};a.prototype._isIn=
function(a,b){return a>=this.xmin&&a<=this.xmax&&b>=this.ymin&&b<=this.ymax};a.prototype._intersect=function(a,c){var d,g,h;if(c.x>=this.xmin&&c.x<=this.xmax)g=c.y<=this.ymin?this.ymin:this.ymax,h=(g-a.y)/(c.y-a.y),d=a.x+h*(c.x-a.x);else if(c.y>=this.ymin&&c.y<=this.ymax)d=c.x<=this.xmin?this.xmin:this.xmax,h=(d-a.x)/(c.x-a.x),g=a.y+h*(c.y-a.y);else{g=c.y<=this.ymin?this.ymin:this.ymax;d=c.x<=this.xmin?this.xmin:this.xmax;var l=(d-a.x)/(c.x-a.x),m=(g-a.y)/(c.y-a.y);l<m?(h=l,g=a.y+l*(c.y-a.y)):(h=
m,d=a.x+m*(c.x-a.x))}this._r=h;return new b.Point(d,g)};a.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)));this.line=[];this.start=0};a.prototype._moveTo=function(a,c,h){3!==this.type?h&&(a=Math.round((a-(this.xmin+this.margin))*
this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line.push(new b.Point(a,c))):(h||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),c<this.ymin&&(c=this.ymin),c>this.ymax&&(c=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line.push(new b.Point(a,c)),this._is_v=this._is_h=!1)};a.prototype._lineTo=function(a,c,h){if(3!==this.type)if(h){a=Math.round((a-(this.xmin+this.margin))*this.finalRatio);
c=Math.round((c-(this.ymin+this.margin))*this.finalRatio);if(0<this.line.length&&(h=this.line[this.line.length-1],h.equals(a,c)))return;this.line.push(new b.Point(a,c))}else this.line&&0<this.line.length&&this._pushLine();else if(h||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),c<this.ymin&&(c=this.ymin),c>this.ymax&&(c=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){h=this.line[this.line.length-
1];var d=h.x===a,k=h.y===c;d&&k||(this._is_h&&d?(h.x=a,h.y=c,h=this.line[this.line.length-2],this._is_h=h.x===a,this._is_v=h.y===c):this._is_v&&k?(h.x=a,h.y=c,h=this.line[this.line.length-2],this._is_h=h.x===a,this._is_v=h.y===c):(this.line.push(new b.Point(a,c)),this._is_h=d,this._is_v=k))}else this.line.push(new b.Point(a,c))};return a}();a.TileClipper=w;w=function(){function a(){}a.prototype.setExtent=function(a){this._ratio=4096===a?1:4096/a};a.prototype.reset=function(a){this.type=a;this.lines=
[];this.line=null};a.prototype.moveTo=function(a,c){this.line&&this.lines.push(this.line);this.line=[];var d=this._ratio;this.line.push(new b.Point(Math.round(a*d),Math.round(c*d)))};a.prototype.lineTo=function(a,c){var d=this._ratio;this.line.push(new b.Point(Math.round(a*d),Math.round(c*d)))};a.prototype.close=function(){var a=this.line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])};a.prototype.result=function(){this.line&&this.lines.push(this.line);if(0===this.lines.length)return null;3===this.type&&
1!==this._ratio&&l.simplify(64,this.lines);return this.lines};return a}();a.SimpleBuilder=w;var l=function(){function a(){}a.simplify=function(b,c){if(c){var d=-b,g=4096+b,h=-b,l=4096+b;b=[];for(var m=[],q=c.length,p=0;p<q;++p){var w=c[p];if(w&&!(2>w.length))for(var x=w[0],F=void 0,C=w.length,A=1;A<C;++A)F=w[A],x.x===F.x&&(x.x<=d&&(x.y>F.y?(b.push(p),b.push(A),b.push(0),b.push(-1)):(m.push(p),m.push(A),m.push(0),m.push(-1))),x.x>=g&&(x.y<F.y?(b.push(p),b.push(A),b.push(1),b.push(-1)):(m.push(p),m.push(A),
m.push(1),m.push(-1)))),x.y===F.y&&(x.y<=h&&(x.x<F.x?(b.push(p),b.push(A),b.push(2),b.push(-1)):(m.push(p),m.push(A),m.push(2),m.push(-1))),x.y>=l&&(x.x>F.x?(b.push(p),b.push(A),b.push(3),b.push(-1)):(m.push(p),m.push(A),m.push(3),m.push(-1)))),x=F}0!==b.length&&0!==m.length&&(a.fillParent(c,m,b),a.fillParent(c,b,m),d=[],a.calcDeltas(d,m,b),a.calcDeltas(d,b,m),a.addDeltas(d,c))}};a.fillParent=function(a,b,h){for(var c=h.length,d=b.length,k=0;k<d;k+=4){for(var l=b[k],m=b[k+1],p=b[k+2],w=a[l][m-1],
l=a[l][m],m=8092,x=-1,F=0;F<c;F+=4)if(h[F+2]===p){var C=h[F],A=h[F+1],u=a[C][A-1],C=a[C][A];switch(p){case 0:case 1:q.between(w.y,u.y,C.y)&&q.between(l.y,u.y,C.y)&&(u=Math.abs(C.y-u.y),u<m&&(m=u,x=F));break;case 2:case 3:q.between(w.x,u.x,C.x)&&q.between(l.x,u.x,C.x)&&(u=Math.abs(C.x-u.x),u<m&&(m=u,x=F))}}b[k+3]=x}};a.calcDeltas=function(b,c,h){for(var d=c.length,k=0;k<d;k+=4){var l=a.calcDelta(k,c,h,[]);b.push(c[k]);b.push(c[k+1]);b.push(c[k+2]);b.push(l)}};a.calcDelta=function(b,c,h,g){b=c[b+3];
if(-1===b)return 0;var d=g.length;if(1<d&&g[d-2]===b)return 0;g.push(b);return a.calcDelta(b,h,c,g)+1};a.addDeltas=function(a,b){for(var c=a.length,d=0,h=0;h<c;h+=4){var l=a[h+3];l>d&&(d=l)}for(h=0;h<c;h+=4){var m=b[a[h]],q=a[h+1],l=d-a[h+3];switch(a[h+2]){case 0:m[q-1].x-=l;m[q].x-=l;break;case 1:m[q-1].x+=l;m[q].x+=l;break;case 2:m[q-1].y-=l;m[q].y-=l;break;case 3:m[q-1].y+=l,m[q].y+=l}}a=b.length;for(c=0;c<a;++c)m=b[c],!m||2>m.length||m[m.length-1].x!==m[0].x&&m[m.length-1].y!==m[0].y&&m.push(m[0])};
return a}()})},"esri/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(w,a){function b(a,b){a%=b;return 0<=a?a:a+b}Object.defineProperty(a,"__esModule",{value:!0});a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var q=1/Math.LN2;a.positiveMod=b;a.radToByte=function(m){return b(m*
a.C_RAD_TO_256,256)};a.degToByte=function(m){return b(m*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*q};a.sqr=function(a){return a*a};a.clamp=function(a,b,h){return Math.min(Math.max(a,b),h)};a.interpolate=function(a,b,h){return a*(1-h)+b*h};a.between=function(a,b,h){return a>=b&&a<=h||a>=h&&a<=b}})},"esri/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","./StyleLayer","dojo/has"],function(w,a,b,q){return function(){function a(b,h){this.styleJSON=b;this.version=
parseFloat(b.version);this.sprite=h?h.spriteUrl:b.sprite;this.glyphs=h?h.glyphsUrl:b.glyphs;if(q("stable-symbol-rendering")){var d=(b.layers||[]).filter(function(a){return a.layout&&a.layout["text-font"]})[0];d&&(b.layers||[]).forEach(function(a){a.layout&&a.layout["text-font"]&&(a.layout["text-font"]=d.layout["text-font"])})}this.layers=(b.layers||[]).map(a._create);this._identifyRefLayers()}a.prototype._identifyRefLayers=function(){for(var a=[],b=[],d=0,c=this.layers;d<c.length;d++){var k=c[d];
if(1===k.type){var g=k.sourceLayer,g=g+("|"+JSON.stringify(k.minzoom)),g=g+("|"+JSON.stringify(k.maxzoom)),g=g+("|"+JSON.stringify(k.filter));a.push({key:g,layer:k})}2===k.type&&(g=k.sourceLayer,g+="|"+JSON.stringify(k.minzoom),g+="|"+JSON.stringify(k.maxzoom),g+="|"+JSON.stringify(k.filter),g+="|"+JSON.stringify(k.layout&&k.layout["line-cap"]),g+="|"+JSON.stringify(k.layout&&k.layout["line-join"]),b.push({key:g,layer:k}))}this._assignRefLayers(a);this._assignRefLayers(b)};a.prototype._assignRefLayers=
function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var b,d,c=a.length,k=0;k<c;k++){var g=a[k];if(g.key===b)g.layer.refLayerId=d;else if(b=g.key,d=g.layer.id,1===g.layer.type&&!g.layer.hasPaintProperty("fill-outline-color"))for(var l=k+1;l<c;l++){var m=a[l];if(m.key===b){if(m.layer.hasPaintProperty("fill-outline-color")){a[k]=m;a[l]=g;d=m.layer.id;break}}else break}}};a._create=function(a,h,d){h=1-1/(d.length+1)*(1+h);switch(a.type){case "background":return new b.StyleLayer(0,
a,h);case "fill":return new b.StyleLayer(1,a,h);case "line":return new b.StyleLayer(2,a,h);case "symbol":return new b.StyleLayer(3,a,h);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":throw Error("Unsupported vector tile circle layer");}throw Error("Unknown vector tile layer");};return a}()})},"*noref":1}});
define("require exports dojo/Deferred ../../core/promiseUtils ./WorkerTile ./style/StyleRepository".split(" "),function(w,a,b,q,m,l){return function(){function a(){this._tiles=new Map;this._spriteInfo={};this._glyphInfo={}}a.prototype.reset=function(){var a=new b;this._spriteInfo={};this._glyphInfo={};var c=this._tiles;c.forEach(function(a){return a.setObsolete()});c.clear();a.resolve();return a.promise};a.prototype.getLayers=function(){return this._layers};a.prototype.setLayers=function(a){this._layers=
(new l(a)).layers;return q.resolve({data:""})};a.prototype.getTile=function(a,b){var c=this,d=a.key,h=m.pool.acquire();h.initialize(a.key,a.refKey,this,a.rotation);var l=a.cacheTile;return b.invoke("fetchTileData",a.refKey).then(function(a){return h.setDataAndParse(a.protobuff,b).then(function(a){l&&6!==h.status&&c._tiles.set(d,h);return a}).otherwise(function(a){h.setObsolete();m.pool.release(h);c._tiles["delete"](h.tileKey);return q.reject(a)})}).otherwise(function(a){h.setObsolete();if(c._tiles.has(h.tileKey))c._tiles["delete"](h.tileKey);
return q.reject(a)}).always(function(a){l||m.pool.release(h);return a})};a.prototype.update=function(a){var b=this._tiles.get(a.key);return b?b.updateSymbols(a.rotation):q.reject()};a.prototype.destructTileData=function(a){this._tiles.has(a.key)&&(m.pool.release(this._tiles.get(a.key)),this._tiles["delete"](a.key));return q.resolve()};a.prototype.fetchSprites=function(a,b){var c=[],d=this._spriteInfo;a.forEach(function(a){void 0===d[a]&&c.push(a)});return 0===c.length?q.resolve():b.invoke("getSprites",
{sprites:c}).then(function(a){a=a.spriteItems;for(var b in a)d[b]=a[b]})};a.prototype.getSpriteItems=function(){return this._spriteInfo};a.prototype.fetchGlyphs=function(a,b,h,g){var c=[],d=this._glyphInfo[b];d?h.forEach(function(a){d[a]||c.push(a)}):(d=this._glyphInfo[b]=[],h.forEach(function(a){return c.push(a)}));return 0===c.length?q.resolve():g.invoke("getGlyphs",{tileID:a,font:b,codePoints:c}).then(function(a){a=a.glyphItems;for(var b in a)d[b]=a[b]})};a.prototype.getGlyphItems=function(a){return this._glyphInfo[a]};
return a}()});