// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.5/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ../../core/Accessor ../../core/Evented ../../core/HandleRegistry ../../core/watchUtils".split(" "),function(n,p,g,d,c,h,k,l,m,e){return function(f){function b(){var a=f.call(this)||this;a._anchorHandles=new m;a.location=null;a.screenLocation=null;a.screenLocationEnabled=!1;a.view=null;a._anchorHandles.add([e.watch(a,"screenLocationEnabled,location,view.size",
function(){return a._updateScreenPointAndHandle()}),e.watch(a,"view, view.ready",function(){return a._wireUpView()})]);return a}g(b,f);b.prototype.destroy=function(){this.view=null;this._anchorHandles&&this._anchorHandles.destroy();this._viewpointHandle=this._anchorHandles=null};b.prototype._wireUpView=function(){var a=this;this._anchorHandles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var b=this.view,b=h.pausable(b,"3d"===b.type?"camera":"viewpoint",
function(){return a._viewpointChange()});this._anchorHandles.add(b,"view");this._viewpointHandle=b;this._toggleWatchingViewpoint()}};b.prototype._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};b.prototype._updateScreenPointAndHandle=function(){this._setScreenLocation();this._toggleWatchingViewpoint()};b.prototype._toggleWatchingViewpoint=function(){var a=this._viewpointHandle,b=this.screenLocationEnabled;a&&(this.location&&b?a.resume():a.pause())};b.prototype._setScreenLocation=
function(){var a=this.location,b=this.view,c=this.screenLocationEnabled,d=this.get("view.ready"),a=c&&a&&d?b.toScreen(a.x,a.y,a.z):null;this._set("screenLocation",a)};d([c.property()],b.prototype,"location",void 0);d([c.property({readOnly:!0})],b.prototype,"screenLocation",void 0);d([c.property()],b.prototype,"screenLocationEnabled",void 0);d([c.property()],b.prototype,"view",void 0);return b=d([c.subclass("esri.widgets.support.AnchorElementViewModel")],b)}(c.declared(k,l))});